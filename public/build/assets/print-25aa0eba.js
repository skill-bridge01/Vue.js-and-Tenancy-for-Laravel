import{a2 as j,a3 as C,a4 as M,Z as T}from"./app-a4a1e86e.js";class D{create(c){return j.post("/create-invoice",c)}update(c){return j.post("/update-invoice",c)}getUserInvoices(){return j.post("/get-user-invoices")}getInvoicesFile(c){return j.post("/get-invoices-file",c,{responseType:"blob"})}}const O=new D;class A{create(c){return j.post("/create-customer",c)}update(c){return j.post("/update-invoice",c)}getAll(){return j.post("/get-customers")}search(c){return j.post("/search-customer",c)}}const P=new A,B=C("carts",{state:()=>({carts:[],selectedCart:null,note:"",discount:0}),actions:{clear(){this.carts=[],this.note="",this.discount=0},setCarts(r){},addNewCart(r){this.carts.filter(h=>h.service.id===r.service.id).length?console.log("already exist"):this.carts.push(r)},removeCart(r){const c=this.carts.find(h=>h.service.id===r.service.id);if(c){const h=this.carts.indexOf(c);h>-1&&this.carts.splice(h,1)}},changeCartCount(r,c){const h=this.carts.find(s=>s.service.id===r.service.id);h&&(h.count+=c)},changeCartDiscount(r,c){const h=this.carts.find(s=>s.service.id===r.service.id);h&&(h.discount=parseFloat(c))},changeCartNote(r,c){const h=this.carts.find(s=>s.service.id===r.service.id);h&&(h.note=c)},updateDiscount(r){this.discount=r},updateNote(r){this.note=r}}}),R={ADD_DISCOUNT:0,ADD_NOTE:1,CANCEL:2,HOLD:3},N={IN_PROGRESS:1,READY_TO_PICK_UP:2,DELIVERED:3},W=C("customers",{state:()=>({customers:[],selectedCustomer:null}),actions:{clear(){this.customers=[],this.selectedCustomer=null},setActiveCustomer(r){this.selectedCustomer=r},addNewCustomer(r){P.create(r).then(c=>{console.log(c.data.customer);const h=c.data.customer;this.customers.push(h)}).catch(c=>{console.log(c)})},fetch(){P.search().then(r=>{console.log(r.data),r.data.status&&(this.customers=r.data.customer)}).catch(r=>{console.log(r)})},async search(r){try{const c=await P.search({keyword:r});return console.log(c.data.status),c.data.status?(console.log(c.data),this.customers=c.data.customer,c.data.customer):Promise.reject("Not found")}catch{return Promise.reject("")}}}}),H=C("invoices",{state:()=>({invoices:[],filteredInvoices:[],selectedInvoice:null,createdInvoice:null,fetchError:null,loading:!1}),actions:{clear(){this.invoices=[],this.filteredInvoices=[],this.selectedInvoice=null,this.createdInvoice=null,this.fetchError=null,this.loading=!1},setInvoices(r){this.invoices=r},setFilteredInvoices(r){this.filteredInvoices=r},setActiveInvoice(r){this.selectedInvoice=r},fetch(){this.loading=!0,O.getUserInvoices().then(r=>{this.invoices=r.data.invoices,this.filteredInvoices=r.data.invoices,this.loading=!1}).catch(r=>{this.fetchError=r,this.loading=!1})},fetchLocalData(){M.get("data-sources/invoices.json",{baseURL:window.location.origin}).then(r=>{console.log(r.data.status),r.data.status&&(console.log(r.data.invoices),this.invoices=r.data.invoices,this.filteredInvoices=r.data.invoices)})},async createInvoice(r,c,h,s,n){console.log("payload");const i=L({carts:r,discount:h,note:c,customer:s,paymentMethod:n});console.log("payload");const d=await O.create(i);return d.data.status?d.data.invoice:Promise.reject("error occurred")},async downloadInvoice(r,c){try{return(await O.getInvoicesFile({invoice_id:r,baseURL:c,pdf:!0})).data}catch(h){return Promise.reject(h)}},async updateInvoice(r){try{const c=await O.update(r);return console.log("invoice Info",c.data),c.data.status?c.data.invoice:Promise.reject("")}catch(c){return Promise.reject(c)}}}});function L(r){let c={};c.discount=r.discount,c.note=r.note,c.customer_name=r.customer.name,c.mobile=r.customer.mobile,c.customer_id=r.customer.id,c.payment_method=r.paymentMethod;const h=r.carts.map((s,n)=>({id:s.service.pivot.id,number_of_piece:s.count,note:s.note,discount:s.discount}));return c.service_piece_ids=h,console.log(c),c}var I={exports:{}};(function(r,c){(function(s,n){r.exports=n()})(window,function(){return function(h){var s={};function n(i){if(s[i])return s[i].exports;var d=s[i]={i,l:!1,exports:{}};return h[i].call(d.exports,d,d.exports,n),d.l=!0,d.exports}return n.m=h,n.c=s,n.d=function(i,d,u){n.o(i,d)||Object.defineProperty(i,d,{enumerable:!0,get:u})},n.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},n.t=function(i,d){if(d&1&&(i=n(i)),d&8||d&4&&typeof i=="object"&&i&&i.__esModule)return i;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:i}),d&2&&typeof i!="string")for(var b in i)n.d(u,b,(function(l){return i[l]}).bind(null,b));return u},n.n=function(i){var d=i&&i.__esModule?function(){return i.default}:function(){return i};return n.d(d,"a",d),d},n.o=function(i,d){return Object.prototype.hasOwnProperty.call(i,d)},n.p="",n(n.s=0)}({"./src/index.js":function(h,s,n){n.r(s),n("./src/sass/index.scss");var i=n("./src/js/init.js"),d=i.default.init;typeof window<"u"&&(window.printJS=d),s.default=d},"./src/js/browser.js":function(h,s,n){n.r(s);var i={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!i.isIE()&&!!window.StyleMedia},isChrome:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!u.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};s.default=i},"./src/js/functions.js":function(h,s,n){n.r(s),n.d(s,"addWrapper",function(){return b}),n.d(s,"capitalizePrint",function(){return l}),n.d(s,"collectStyles",function(){return a}),n.d(s,"addHeader",function(){return e}),n.d(s,"cleanUp",function(){return y}),n.d(s,"isRawHTML",function(){return v});var i=n("./src/js/modal.js"),d=n("./src/js/browser.js");function u(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(p){return typeof p}:u=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},u(t)}function b(t,f){var p="font-family:"+f.font+" !important; font-size: "+f.font_size+" !important; width:100%;";return'<div style="'+p+'">'+t+"</div>"}function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,f){for(var p=document.defaultView||window,g="",m=p.getComputedStyle(t,""),E=0;E<m.length;E++)(f.targetStyles.indexOf("*")!==-1||f.targetStyle.indexOf(m[E])!==-1||o(f.targetStyles,m[E]))&&m.getPropertyValue(m[E])&&(g+=m[E]+":"+m.getPropertyValue(m[E])+";");return g+="max-width: "+f.maxWidth+"px !important; font-size: "+f.font_size+" !important;",g}function o(t,f){for(var p=0;p<t.length;p++)if(u(f)==="object"&&f.indexOf(t[p])!==-1)return!0;return!1}function e(t,f){var p=document.createElement("div");if(v(f.header))p.innerHTML=f.header;else{var g=document.createElement("h1"),m=document.createTextNode(f.header);g.appendChild(m),g.setAttribute("style",f.headerStyle),p.appendChild(g)}t.insertBefore(p,t.childNodes[0])}function y(t){t.showModal&&i.default.close(),t.onLoadingEnd&&t.onLoadingEnd(),(t.showModal||t.onLoadingStart)&&window.URL.revokeObjectURL(t.printable);var f="mouseover";(d.default.isChrome()||d.default.isFirefox())&&(f="focus");var p=function g(){window.removeEventListener(f,g),t.onPrintDialogClose();var m=document.getElementById(t.frameId);m&&m.remove()};window.addEventListener(f,p)}function v(t){var f=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return f.test(t)}},"./src/js/html.js":function(h,s,n){n.r(s);var i=n("./src/js/functions.js"),d=n("./src/js/print.js");function u(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(e){return typeof e}:u=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(a)}s.default={print:function(o,e){var y=l(o.printable)?o.printable:document.getElementById(o.printable);if(!y){window.console.error("Invalid HTML element id: "+o.printable);return}o.printableElement=b(y,o),o.header&&Object(i.addHeader)(o.printableElement,o),d.default.send(o,e)}};function b(a,o){for(var e=a.cloneNode(),y=Array.prototype.slice.call(a.childNodes),v=0;v<y.length;v++)if(o.ignoreElements.indexOf(y[v].id)===-1){var t=b(y[v],o);e.appendChild(t)}switch(o.scanStyles&&a.nodeType===1&&e.setAttribute("style",Object(i.collectStyles)(a,o)),a.tagName){case"SELECT":e.value=a.value;break;case"CANVAS":e.getContext("2d").drawImage(a,0,0);break}return e}function l(a){return u(a)==="object"&&a&&(a instanceof HTMLElement||a.nodeType===1)}},"./src/js/image.js":function(h,s,n){n.r(s);var i=n("./src/js/functions.js"),d=n("./src/js/print.js"),u=n("./src/js/browser.js");s.default={print:function(l,a){l.printable.constructor!==Array&&(l.printable=[l.printable]),l.printableElement=document.createElement("div"),l.printable.forEach(function(o){var e=document.createElement("img");if(e.setAttribute("style",l.imageStyle),e.src=o,u.default.isFirefox()){var y=e.src;e.src=y}var v=document.createElement("div");v.appendChild(e),l.printableElement.appendChild(v)}),l.header&&Object(i.addHeader)(l.printableElement,l),d.default.send(l,a)}}},"./src/js/init.js":function(h,s,n){n.r(s);var i=n("./src/js/browser.js"),d=n("./src/js/modal.js"),u=n("./src/js/pdf.js"),b=n("./src/js/html.js"),l=n("./src/js/raw-html.js"),a=n("./src/js/image.js"),o=n("./src/js/json.js");function e(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?e=function(f){return typeof f}:e=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},e(v)}var y=["pdf","html","image","json","raw-html"];s.default={init:function(){var t={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(w){throw w},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},f=arguments[0];if(f===void 0)throw new Error("printJS expects at least 1 attribute.");switch(e(f)){case"string":t.printable=encodeURI(f),t.fallbackPrintable=t.printable,t.type=arguments[1]||t.type;break;case"object":t.printable=f.printable,t.fallbackPrintable=typeof f.fallbackPrintable<"u"?f.fallbackPrintable:t.printable,t.fallbackPrintable=t.base64?"data:application/pdf;base64,".concat(t.fallbackPrintable):t.fallbackPrintable;for(var p in t)p==="printable"||p==="fallbackPrintable"||(t[p]=typeof f[p]<"u"?f[p]:t[p]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+e(f))}if(!t.printable)throw new Error("Missing printable information.");if(!t.type||typeof t.type!="string"||y.indexOf(t.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");t.showModal&&d.default.show(t),t.onLoadingStart&&t.onLoadingStart();var g=document.getElementById(t.frameId);g&&g.parentNode.removeChild(g);var m=document.createElement("iframe");switch(i.default.isFirefox()?m.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):m.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),m.setAttribute("id",t.frameId),t.type!=="pdf"&&(m.srcdoc="<html><head><title>"+t.documentTitle+"</title>",t.css&&(Array.isArray(t.css)||(t.css=[t.css]),t.css.forEach(function(S){m.srcdoc+='<link rel="stylesheet" href="'+S+'">'})),m.srcdoc+="</head><body></body></html>"),t.type){case"pdf":if(i.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var E=window.open(t.fallbackPrintable,"_blank");E.focus(),t.onIncompatibleBrowser()}catch(S){t.onError(S)}finally{t.showModal&&d.default.close(),t.onLoadingEnd&&t.onLoadingEnd()}else u.default.print(t,m);break;case"image":a.default.print(t,m);break;case"html":b.default.print(t,m);break;case"raw-html":l.default.print(t,m);break;case"json":o.default.print(t,m);break}}}},"./src/js/json.js":function(h,s,n){n.r(s);var i=n("./src/js/functions.js"),d=n("./src/js/print.js");function u(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(o){return typeof o}:u=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u(l)}s.default={print:function(a,o){if(u(a.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof a.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!a.properties||!Array.isArray(a.properties))throw new Error("Invalid properties array for your JSON data.");a.properties=a.properties.map(function(e){return{field:u(e)==="object"?e.field:e,displayName:u(e)==="object"?e.displayName:e,columnSize:u(e)==="object"&&e.columnSize?e.columnSize+";":100/a.properties.length+"%;"}}),a.printableElement=document.createElement("div"),a.header&&Object(i.addHeader)(a.printableElement,a),a.printableElement.innerHTML+=b(a),d.default.send(a,o)}};function b(l){var a=l.printable,o=l.properties,e='<table style="border-collapse: collapse; width: 100%;">';l.repeatTableHeader&&(e+="<thead>"),e+="<tr>";for(var y=0;y<o.length;y++)e+='<th style="width:'+o[y].columnSize+";"+l.gridHeaderStyle+'">'+Object(i.capitalizePrint)(o[y].displayName)+"</th>";e+="</tr>",l.repeatTableHeader&&(e+="</thead>"),e+="<tbody>";for(var v=0;v<a.length;v++){e+="<tr>";for(var t=0;t<o.length;t++){var f=a[v],p=o[t].field.split(".");if(p.length>1)for(var g=0;g<p.length;g++)f=f[p[g]];else f=f[o[t].field];e+='<td style="width:'+o[t].columnSize+l.gridStyle+'">'+f+"</td>"}e+="</tr>"}return e+="</tbody></table>",e}},"./src/js/modal.js":function(h,s,n){n.r(s);var i={show:function(u){var b="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",l=document.createElement("div");l.setAttribute("style",b),l.setAttribute("id","printJS-Modal");var a=document.createElement("div");a.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var o=document.createElement("div");o.setAttribute("class","printClose"),o.setAttribute("id","printClose"),a.appendChild(o);var e=document.createElement("span");e.setAttribute("class","printSpinner"),a.appendChild(e);var y=document.createTextNode(u.modalMessage);a.appendChild(y),l.appendChild(a),document.getElementsByTagName("body")[0].appendChild(l),document.getElementById("printClose").addEventListener("click",function(){i.close()})},close:function(){var u=document.getElementById("printJS-Modal");u&&u.parentNode.removeChild(u)}};s.default=i},"./src/js/pdf.js":function(h,s,n){n.r(s);var i=n("./src/js/print.js"),d=n("./src/js/functions.js");s.default={print:function(l,a){if(l.base64){var o=Uint8Array.from(atob(l.printable),function(y){return y.charCodeAt(0)});u(l,a,o);return}l.printable=/^(blob|http|\/\/)/i.test(l.printable)?l.printable:window.location.origin+(l.printable.charAt(0)!=="/"?"/"+l.printable:l.printable);var e=new window.XMLHttpRequest;e.responseType="arraybuffer",e.addEventListener("error",function(){Object(d.cleanUp)(l),l.onError(e.statusText,e)}),e.addEventListener("load",function(){if([200,201].indexOf(e.status)===-1){Object(d.cleanUp)(l),l.onError(e.statusText,e);return}u(l,a,e.response)}),e.open("GET",l.printable,!0),e.send()}};function u(b,l,a){var o=new window.Blob([a],{type:"application/pdf"});o=window.URL.createObjectURL(o),l.setAttribute("src",o),i.default.send(b,l)}},"./src/js/print.js":function(h,s,n){n.r(s);var i=n("./src/js/browser.js"),d=n("./src/js/functions.js"),u={send:function(e,y){document.getElementsByTagName("body")[0].appendChild(y);var v=document.getElementById(e.frameId);v.onload=function(){if(e.type==="pdf"){i.default.isFirefox()?setTimeout(function(){return b(v,e)},1e3):b(v,e);return}var t=v.contentWindow||v.contentDocument;if(t.document&&(t=t.document),t.body.appendChild(e.printableElement),e.type!=="pdf"&&e.style){var f=document.createElement("style");f.innerHTML=e.style,t.head.appendChild(f)}var p=t.getElementsByTagName("img");p.length>0?l(Array.from(p)).then(function(){return b(v,e)}):b(v,e)}}};function b(o,e){try{if(o.focus(),i.default.isEdge()||i.default.isIE())try{o.contentWindow.document.execCommand("print",!1,null)}catch{o.contentWindow.print()}else o.contentWindow.print()}catch(y){e.onError(y)}finally{i.default.isFirefox()&&(o.style.visibility="hidden",o.style.left="-1px"),Object(d.cleanUp)(e)}}function l(o){var e=o.map(function(y){if(y.src&&y.src!==window.location.href)return a(y)});return Promise.all(e)}function a(o){return new Promise(function(e){var y=function v(){!o||typeof o.naturalWidth>"u"||o.naturalWidth===0||!o.complete?setTimeout(v,500):e()};y()})}s.default=u},"./src/js/raw-html.js":function(h,s,n){n.r(s);var i=n("./src/js/print.js");s.default={print:function(u,b){u.printableElement=document.createElement("div"),u.printableElement.setAttribute("style","width:100%"),u.printableElement.innerHTML=u.printable,i.default.send(u,b)}}},"./src/sass/index.scss":function(h,s,n){},0:function(h,s,n){h.exports=n("./src/index.js")}}).default})})(I);var x=I.exports;const K=T(x);export{R as C,N as I,W as a,H as b,K as p,B as u};
