import{H as xe,o as c,c as r,a as e,I as J,_ as V,u as Y,x as D,r as k,t as p,b as l,E as w,q as L,F as P,p as X,g as Q,l as z,m as B,z as H,n as T,s as F,G as te,e as E,d as R,J as we,K as $e,L as ue,v as Ce,k as _e,j as ke,M as Ae,D as se,y as ie,B as Se,C as Ie,N as De,w as je}from"./app-a4a1e86e.js";import{_ as ce,a as Me}from"./CardBoxModal-b424615d.js";import{u as j,a as Z,C as O,b as pe,p as Pe}from"./print-25aa0eba.js";import{u as q}from"./pieces-a65603a2.js";import{a as Be,o as Ne,U as Oe}from"./user_black-91e51db1.js";import{u as re}from"./services-1d3c2c5c.js";import"./BaseIcon-127a6522.js";var le={appendKeyframes:(t,o)=>{if(!(window!=null&&window.document))return;const s=document.createElement("style");s.setAttribute("id",t),s.innerHTML=`@keyframes ${t} {${o}}`,document.body.appendChild(s)},removeKeyframes:t=>{var s;if(!(window!=null&&window.document))return;const o=document.getElementById(t);o&&((s=o.parentNode)==null||s.removeChild(o))}};const Ee={name:"SpringSpinner",props:{animationDuration:{type:Number,default:3e3},size:{type:Number,default:70},color:{type:String,default:"#fff"}},data(){return{animationName:`spring-spinner-animation-${Date.now()}`}},computed:{spinnerStyle(){return{height:`${this.size}px`,width:`${this.size}px`}},spinnerPartStyle(){return{height:`${this.size/2}px`,width:`${this.size}px`}},rotatorStyle(){return{height:`${this.size}px`,width:`${this.size}px`,borderRightColor:this.color,borderTopColor:this.color,borderWidth:`${this.size/7}px`,animationDuration:`${this.animationDuration}ms`,animationName:this.animationName}}},watch:{size:{handler:"updateAnimation",immediate:!0},color:{handler:"updateAnimation",immediate:!0}},mounted(){this.updateAnimation()},beforeUnmount(){le.removeKeyframes(this.animationName)},methods:{updateAnimation(){le.removeKeyframes(this.animationName),le.appendKeyframes(this.animationName,this.generateKeyframes())},generateKeyframes(){return`
        0% {
          border-width: ${this.size/7}px;
        }
        25% {
          border-width: ${this.size/23.33}px;
        }
        50% {
          transform: rotate(115deg);
          border-width: ${this.size/7}px;
        }
        75% {
          border-width: ${this.size/23.33}px;
          }
        100% {
          border-width: ${this.size/7}px;
        }`}}};function Le(t,o,s,n,a,i){return c(),r("div",{class:"spring-spinner",style:J(i.spinnerStyle)},[e("div",{class:"spring-spinner-part top",style:J(i.spinnerPartStyle)},[e("div",{class:"spring-spinner-rotator",style:J(i.rotatorStyle)},null,4)],4),e("div",{class:"spring-spinner-part bottom",style:J(i.spinnerPartStyle)},[e("div",{class:"spring-spinner-rotator",style:J(i.rotatorStyle)},null,4)],4)],4)}var he=xe(Ee,[["render",Le]]);const Ve={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",fill:"none"},Te=e("path",{fill:"#45A9CB",d:"M3.75.5A3.262 3.262 0 0 0 .5 3.75v12.5a3.262 3.262 0 0 0 3.25 3.25h10.5a3.261 3.261 0 0 0 3.25-3.25V3.75A3.262 3.262 0 0 0 14.25.5H3.75Zm0 1.5h10.5c.975 0 1.75.775 1.75 1.75v12.5A1.74 1.74 0 0 1 14.25 18H3.75A1.74 1.74 0 0 1 2 16.25V3.75C2 2.775 2.775 2 3.75 2Zm.5 1.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm2.5 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm6.75 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM9 6c-2.753 0-5 2.247-5 5 0 2.752 2.247 5 5 5 2.752 0 5-2.248 5-5 0-2.753-2.248-5-5-5Zm0 1.5c1.825 0 3.263 1.394 3.435 3.172-1.275.596-1.926.29-2.988-.121-.94-.365-2.205-.722-3.8-.29C5.993 8.692 7.32 7.5 9 7.5Zm-2.037 3.985c.126-.008.247-.007.363.003.548.048 1.025.246 1.58.461.875.34 1.99.698 3.33.367A3.48 3.48 0 0 1 9 14.5c-1.654 0-2.966-1.154-3.338-2.688.493-.192.922-.301 1.3-.327Z"},null,-1),Re=[Te];function Ue(t,o){return c(),r("svg",Ve,Re)}const ze={render:Ue},He={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"4",fill:"none"},Fe=e("path",{fill:"#4BC49A",d:"M1.667.933a1.067 1.067 0 1 0 0 2.134h10.666a1.067 1.067 0 1 0 0-2.134H1.667Z"},null,-1),Ze=[Fe];function qe(t,o){return c(),r("svg",He,Ze)}const Ke={render:qe},We={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"none"},Ge=e("path",{fill:"#4BC49A",d:"M6.984.585a1.067 1.067 0 0 0-1.05 1.082v4.266H1.666a1.067 1.067 0 1 0 0 2.134h4.266v4.266a1.067 1.067 0 1 0 2.134 0V8.067h4.266a1.067 1.067 0 1 0 0-2.134H8.067V1.667A1.067 1.067 0 0 0 6.984.585Z"},null,-1),Je=[Ge];function Ye(t,o){return c(),r("svg",We,Je)}const Xe={render:Ye},Qe={xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:"none"},et=e("rect",{width:"35",height:"35",x:".5",y:".5",fill:"#FEF6FA",rx:"5.5"},null,-1),tt=e("path",{fill:"#FF5757",d:"M22.49 11.995a.501.501 0 0 0-.377.189l-9 11a.5.5 0 1 0 .774.632l9-11a.5.5 0 0 0-.398-.821Zm-7.99.338c-1.19 0-2.167.977-2.167 2.167v1.333c0 1.19.977 2.167 2.167 2.167s2.167-.976 2.167-2.167V14.5c0-1.19-.977-2.167-2.167-2.167Zm0 1c.648 0 1.167.52 1.167 1.167v1.333c0 .648-.52 1.167-1.167 1.167a1.162 1.162 0 0 1-1.167-1.167V14.5c0-.648.52-1.167 1.167-1.167Zm7 4.667c-1.19 0-2.167.977-2.167 2.167V21.5c0 1.19.977 2.167 2.167 2.167s2.167-.977 2.167-2.167v-1.333c0-1.19-.977-2.167-2.167-2.167Zm0 1c.648 0 1.167.519 1.167 1.167V21.5c0 .648-.52 1.167-1.167 1.167a1.162 1.162 0 0 1-1.167-1.167v-1.333c0-.648.52-1.167 1.167-1.167Z"},null,-1),st=e("rect",{width:"35",height:"35",x:".5",y:".5",stroke:"#FF5757",rx:"5.5"},null,-1),ot=[et,tt,st];function nt(t,o){return c(),r("svg",Qe,ot)}const ve={render:nt};const lt=t=>(X("data-v-f25289a1"),t=t(),Q(),t),ct={class:"flex justify-between items-center px-6 py-3 cart-item-wrapper"},at={class:"flex items-center gap-4"},it=["src"],rt={class:"price-label"},dt={class:"price-label"},ut={class:"flex gap-2"},_t={class:""},pt={class:"widget-name-label"},ht={class:"quantity-wrapper font-readex text-main mt-2 p-2 font-semibold text-sm"},vt=["src"],mt=["src"],ft=["src"],gt={class:"flex justify-end items-center mr-7 ml-4 px-4 py-3 gap-2 urgent-wash-wrapper"},yt={class:"urgent-wash-label"},bt={key:0,class:"flex justify-between items-center mr-5 ml-4 py-3 gap-2 urgent-wash-wrapper"},xt={class:""},wt={class:"text-right description-label"},$t={class:"flex items-center justify-between gap-1"},Ct=lt(()=>e("span",null,"ريال",-1)),kt={class:"text-right description-label"},At={class:"flex items-center justify-between w-32 border rounded-lg overflow-hidden"},St={key:1,class:"flex"},It={__name:"CartItem",props:{cart:Object},setup(t){const o=t,{t:s}=Y(),n=j();D(j());const a=k(1),i=k(!1),_=v=>{n.changeCartDiscount(o.cart,v.target.value)},d=v=>{n.changeCartNote(o.cart,v.target.value)},u=()=>{a.value-=1,n.changeCartCount(o.cart,-1)},b=()=>{a.value+=1,n.changeCartCount(o.cart,1)},y=()=>{i.value=!i.value},$=()=>{n.removeCart(o.cart)};return(v,g)=>{var m,C,M,S,h;return c(),r(P,null,[e("div",ct,[e("div",at,[e("button",{type:"button",onClick:$},[e("img",{class:"",src:"/images/home/close_grey.svg",alt:""},null,8,it)]),e("span",rt,p(l(s)("dashboard.currency")),1),e("span",dt,p((m=t.cart)==null?void 0:m.service.pivot.price),1)]),e("div",ut,[e("div",_t,[e("div",pt,p((C=t.cart)==null?void 0:C.pieceTitle),1),e("div",ht,p(l(s)("dashboard.count"))+" "+p((M=t.cart)==null?void 0:M.count),1)]),e("div",null,[e("img",{class:"",src:"/images/home/trousers.svg",alt:""},null,8,vt)]),e("div",{class:"flex justify-center items-center cursor-pointer",onClick:y},[i.value?(c(),r("img",{key:1,class:"",src:"/images/home/arrow_up_grey.svg",alt:""},null,8,ft)):(c(),r("img",{key:0,class:"",src:"/images/home/arrow_down_grey.svg",alt:""},null,8,mt))])])]),e("div",gt,[e("p",yt,p((S=t.cart)==null?void 0:S.service.services_title),1),w(l(ze))]),i.value?(c(),r("div",bt,[e("div",xt,[e("div",wt,p(l(s)("dashboard.discount")),1),e("div",$t,[Ct,w(l(ve)),e("input",{type:"text",placeholder:"0",class:"border px-1 py-1 rounded-lg text-right focus:outline-none max-w-[140px] h-9",onInput:_},null,32)])]),e("div",null,[e("div",kt,p(l(s)("dashboard.pieceCount")),1),e("div",At,[e("div",{class:"minus-button cursor-pointer",onClick:u},[w(l(Ke))]),e("div",null,p(((h=t.cart)==null?void 0:h.count)||a.value),1),e("div",{class:"minus-button cursor-pointer",onClick:b},[w(l(Xe))])])])])):L("",!0),i.value?(c(),r("div",St,[e("input",{type:"text",placeholder:"Note",class:"border px-4 py-2 rounded-lg text-right focus:outline-none w-full mx-5",onInput:d},null,32)])):L("",!0)],64)}}},Dt=V(It,[["__scopeId","data-v-f25289a1"]]),jt={class:"w-full px-4 py-3 border border-gray-100 flex justify-end items-center"},Mt=["value"],Pt={__name:"AddNoteModal",props:{modalActive:Boolean},emits:["toggleModalActive"],setup(t,{emit:o}){const s=t,{t:n}=Y(),a=z({get(){return s.modalActive},set(y){o("toggleModalActive",y)}}),i=j(),{note:_}=D(j()),d=k(_),u=y=>{d.value=y.target.value},b=()=>{console.log("confirm"),i.updateNote(d.value)};return(y,$)=>(c(),B(ce,{modelValue:a.value,"onUpdate:modelValue":$[0]||($[0]=v=>a.value=v),title:l(n)("dashboard.note"),"button-label":l(n)("common.save"),button:"bg-main",onConfirm:b},{default:H(()=>[e("div",jt,[e("textarea",{class:"w-full focus:outline-none text-right",value:d.value,placeholder:"أحمد أحمد",onInput:u},`
      `,40,Mt)])]),_:1},8,["modelValue","title","button-label"]))}};const Bt=t=>(X("data-v-252a9f4c"),t=t(),Q(),t),Nt={class:"w-full px-4 py-3 flex justify-center"},Ot={class:""},Et={class:"text-right description-label"},Lt={class:"flex items-center justify-between gap-1"},Vt=Bt(()=>e("span",null,"ريال",-1)),Tt=["value"],Rt={__name:"AddDiscountModal",props:{modalActive:Boolean},emits:["toggleModalActive"],setup(t,{emit:o}){const s=t,{t:n}=Y(),a=z({get(){return s.modalActive},set(u){o("toggleModalActive",u)}});j();const{discount:i}=D(j()),_=k(i),d=u=>{_.value=parseFloat(u.target.value)||0};return(u,b)=>(c(),B(ce,{modelValue:a.value,"onUpdate:modelValue":b[0]||(b[0]=y=>a.value=y),title:l(n)("dashboard.addDiscount"),"button-label":l(n)("common.save"),button:"bg-main"},{default:H(()=>[e("div",Nt,[e("div",Ot,[e("div",Et,p(l(n)("dashboard.discount")),1),e("div",Lt,[Vt,w(l(ve)),e("input",{type:"text",placeholder:"0",class:"border px-1 py-1 rounded-lg text-right focus:outline-none h-9",value:_.value,onInput:d},null,40,Tt)])])])]),_:1},8,["modelValue","title","button-label"]))}},Ut=V(Rt,[["__scopeId","data-v-252a9f4c"]]),zt=["src"],Ht={class:"font-medium text-sm font-readex"},Ft={__name:"CartButton",props:{image:String,title:String,noBordder:Boolean,type:Number},setup(t){const o=t,s=k(!1),n=k(!1),a=j(),i=Z(),_=()=>{switch(console.log("button click"),s.value=!1,n.value=!1,o.type){case O.ADD_DISCOUNT:n.value=!0;break;case O.ADD_NOTE:s.value=!0;break;case O.CANCEL:a.clear(),i.clear();break}},d=b=>{s.value=b},u=b=>{n.value=b};return(b,y)=>(c(),r(P,null,[w(Pt,{"modal-active":s.value,onToggleModalActive:d},null,8,["modal-active"]),w(Ut,{"modal-active":n.value,onToggleModalActive:u},null,8,["modal-active"]),e("div",{class:T(["flex flex-col justify-center items-center flex-1",o.noBordder?"":"border-r"])},[e("button",{type:"button",onClick:_},[e("img",{class:"",src:o.image,alt:""},null,8,zt)]),e("p",Ht,p(o.title),1)],2)],64))}};const Zt={class:"flex justify-between items-center px-6 py-3 customer-wrapper"},qt={class:"flex items-center gap-4"},Kt=["src"],Wt=["src"],Gt={class:"flex justify-end items-center"},Jt={class:"name-label font-readex font-normal text-[16px]"},Yt={type:"button"},Xt=["src"],Qt={class:"name-label font-readex font-light text-[16px]"},es={__name:"CustomerList",props:{customer:Object},emits:["handleRemoveCustomer","handleEditCustomer"],setup(t,{emit:o}){const s=t,n=()=>{o("handleRemoveCustomer",s.customer)},a=()=>{o("handleEditCustomer",s.customer)};return(i,_)=>{var d,u;return c(),r("div",Zt,[e("div",qt,[e("button",{type:"button",onClick:n},[e("img",{class:"",src:"/images/home/trash_red.svg",alt:""},null,8,Kt)]),e("button",{type:"button",onClick:a},[e("img",{class:"",src:"/images/home/edit_grey.svg",alt:""},null,8,Wt)])]),e("div",null,[e("div",Gt,[e("span",Jt,p((d=t.customer)==null?void 0:d.name),1),e("button",Yt,[e("img",{class:"",src:"/images/home/placeholder_user.svg",alt:""},null,8,Xt)])]),e("span",Qt,p((u=t.customer)==null?void 0:u.mobile),1)])])}}},ts=V(es,[["__scopeId","data-v-d6d7024a"]]);const f=t=>(X("data-v-d97d23df"),t=t(),Q(),t),ss={class:"invoice-container z-50 overflow-scroll"},os={class:"content-wrapper bg-white"},ns={class:"company-header"},ls=f(()=>e("div",{class:"company-name"},[E(" اسم الشركة "),e("br"),E(" المملكة العربية السعودية - جدة - شارع "),e("p",null,"+966 65489415")],-1)),cs={class:"company-logo"},as=["src"],is=f(()=>e("div",{class:"invoice-title-wrapper"},[E(" فاتورة "),e("br"),E(" INV-23-16574 ")],-1)),rs=f(()=>e("div",{class:"line"},null,-1)),ds={class:"customer-info"},us={class:"flex gap-1 items-center justify-end"},_s=f(()=>e("span",null,"الزبون",-1)),ps=f(()=>e("span",null,"رقم الهاتف",-1)),hs={class:"invoice-table-wrapper"},vs=f(()=>e("thead",null,[e("tr",null,[e("th",null,"الإجمالي"),e("th",null,"الخدمة"),e("th",null,"العدد"),e("th",null,"نوع القطعة")])],-1)),ms=f(()=>e("span",null,"ر.س",-1)),fs=f(()=>e("span",null,"ر.س",-1)),gs=f(()=>e("td",null,null,-1)),ys=f(()=>e("td",null,null,-1)),bs=f(()=>e("td",null,"المجموع",-1)),xs=f(()=>e("span",null,"ر.س",-1)),ws=f(()=>e("td",null,null,-1)),$s=f(()=>e("td",null,null,-1)),Cs=f(()=>e("td",null,"الخصم",-1)),ks=f(()=>e("span",null,"ر.س",-1)),As=f(()=>e("td",null,null,-1)),Ss=f(()=>e("td",null,null,-1)),Is=f(()=>e("td",null,"المجموع الكلي",-1)),Ds={key:0,class:"note-wrapper"},js=f(()=>e("span",null,"ملاحظات:",-1)),Ms={class:"sign-wrapper"},Ps={class:"note-wrapper"},Bs=f(()=>e("span",null,"التاريخ",-1)),Ns={class:"note-wrapper"},Os=f(()=>e("span",null,"بواسطة",-1)),Es=f(()=>e("div",{class:"line"},null,-1)),Ls={class:"footer"},Vs=f(()=>e("p",null,"شكراً لطبلكم خدماتنا",-1)),Ts=f(()=>e("p",null,"www.website.com",-1)),Rs={class:"social-wrapper"},Us=["src"],zs=["src"],Hs=f(()=>e("p",null,"social.account",-1)),Fs={class:"button-wrapper"},Zs={class:"flex justify-center items-center gap-2"},qs=f(()=>e("span",{class:"print-label"},"طباعة",-1)),Ks=["src"],Ws=f(()=>e("span",{class:"download-label"},"PDF",-1)),Gs=["src"],Js={class:"flex justify-center items-center gap-2"},Ys=f(()=>e("span",{class:"print-label"},"إذهب إلى الفواتير",-1)),Xs=["src"],Qs={__name:"InvoiceModal",props:{modalActive:Boolean,invoiceData:Object},emits:["toggleModalActive","viewInvoices"],setup(t,{emit:o}){const s=t,{selectedCustomer:n}=D(Z()),{carts:a,note:i,discount:_}=D(j()),d=pe(),u=z({get(){return s.modalActive},set(h){o("toggleModalActive",h)}}),b=z(()=>{let h=0;return a.value.forEach(x=>{h+=x.service.pivot.price*x.count}),h});z(()=>{let h=0;return a.value.forEach(x=>{h+=x.discount}),h});const y=()=>{console.log(_.value);let h=0;return a.value.forEach(I=>{h+=I.service.pivot.price*I.count}),h*((parseFloat(_.value)||0)/100)},$=()=>{o("toggleModalActive",!1)},v=()=>$(),g=()=>{S()},m=()=>{M()},C=()=>{o("toggleModalActive",!1),o("viewInvoices")},M=()=>{d.downloadInvoice(s.invoiceData.id,window.location.origin).then(h=>{const x=window.URL.createObjectURL(new Blob([h],{type:"application/pdf"}));Pe(x)}).catch(h=>{console.log(h)})},S=()=>{d.downloadInvoice(s.invoiceData.id,window.location.origin).then(h=>{const x=window.URL.createObjectURL(new Blob([h],{type:"application/pdf"})),I=document.createElement("a");I.href=x,I.setAttribute("download","invoice.pdf"),document.body.appendChild(I),I.click()}).catch(h=>{console.log(h)})};return(h,x)=>F((c(),B(Me,{onOverlayClick:v},{default:H(()=>{var I,K,U,N;return[e("div",ss,[F(e("div",{class:T(["invoice-wrapper mt-36 shadow-lg w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12 z-50 dark:bg-slate-900",u.value?"":"hidden"])},[e("div",os,[e("div",ns,[ls,e("div",cs,[e("img",{src:"/images/home/company_logo.svg",alt:"logo"},null,8,as)])]),is,rs,e("div",ds,[e("p",us,[e("span",null,p(((I=l(n))==null?void 0:I.name)||"أحمد أحمد")+":",1),_s]),e("p",null,[e("span",null,p(((K=l(n))==null?void 0:K.mobile)||"+966 45648153"),1),E(" : "),ps])]),e("div",hs,[e("table",null,[vs,e("tbody",null,[(c(!0),r(P,null,R(l(a),(W,oe)=>(c(),r("tr",{key:oe},[e("td",null,[ms,E(),e("span",null,p(W.service.pivot.price),1)]),e("td",null,p(W.service.services_title),1),e("td",null,p(W.count),1),e("td",null,p(W.pieceTitle),1)]))),128)),e("tr",null,[e("td",null,[fs,E(),e("span",null,p(b.value),1)]),gs,ys,bs]),e("tr",null,[e("td",null,[xs,E(),e("span",null,p(y().toFixed(2)),1)]),ws,$s,Cs]),e("tr",null,[e("td",null,[ks,E(),e("span",null,p((b.value-y()).toFixed(2)),1)]),As,Ss,Is])])])]),(U=t.invoiceData)!=null&&U.note&&t.invoiceData.note.length?(c(),r("div",Ds,[e("span",null,p(t.invoiceData.note),1),js])):L("",!0),e("div",Ms,[e("div",Ps,[e("span",null,p(l(we)(new Date,"dd-MM-yyyy HH:mm:ss")),1),E(" : "),Bs]),e("div",Ns,[e("span",null,p(((N=l(n))==null?void 0:N.name)||"David John"),1),E(" : "),Os])]),Es,e("div",Ls,[Vs,Ts,e("div",Rs,[e("img",{src:"/images/home/twitter.svg",alt:"twitter"},null,8,Us),e("img",{src:"/images/home/facebook.svg",alt:"facebook"},null,8,zs),Hs])])]),e("div",Fs,[e("div",Zs,[e("div",{class:"bg-brandGreen rounded-lg flex px-6 py-3 justify-center items-center gap-2.5 cursor-pointer",onClick:m},[qs,e("img",{src:"/images/home/print_white.svg",alt:"printer"},null,8,Ks)]),e("div",{class:"bg-white rounded-lg flex px-6 py-3 justify-center items-center gap-2.5 cursor-pointer",onClick:g},[Ws,e("img",{src:"/images/home/download_black.svg",alt:"printer"},null,8,Gs)])]),e("div",Js,[e("div",{class:"flex px-6 py-3 justify-center items-center gap-2.5 cursor-pointer",onClick:C},[Ys,e("img",{src:"/images/home/invoice_white.svg",alt:"printer"},null,8,Xs)])])])],2),[[te,u.value]])])]}),_:1},512)),[[te,u.value]])}},eo=V(Qs,[["__scopeId","data-v-d97d23df"]]);const to={class:"my-2 relative z-40 flex items-center"},so=["name"],oo=["onClick"],no={__name:"CustomerAutocomplete",props:{name:{type:String,required:!1,default:"autocomplete"},source:{type:[String,Array,Function],required:!0,default:""},label:{type:String,required:!1,default:"name"},responseProperty:{type:String,required:!1,default:"name"}},emits:["clickCustomerRow"],setup(t,{emit:o}){const s=t;let n=$e({search:"",isOpen:!1,results:[]});const a=k(null),i=k(!1),_=Z();D(Z());const d=Be(()=>{if(console.log(n.search),!s.source||!n.search)return!1;switch(n.isOpen=!0,!0){case typeof s.source=="string":return b(n.search);case typeof s.source=="function":return s.source(n.search).then(v=>{n.results=y(v)});case Array.isArray(s.source):return u(s.source);default:throw new Error("typeof source is "+typeof s.source)}},500),u=(v,g="")=>{n.results=v.filter(m=>m.name.toLowerCase().indexOf(n.search.toLowerCase())>-1)},b=v=>{i.value=!0,_.search(v).then(g=>{i.value=!1,console.log(g),n.results=g}).catch(g=>{console.log(g),i.value=!1})},y=v=>{if(s.responseProperty){let g;return JSON.stringify(v,(m,C)=>(C&&C[s.responseProperty]&&(g=C[s.responseProperty]),C)),g}return Array.isArray(v)?v:[]},$=v=>{n.search=v[s.label],n.isOpen=!1,o("clickCustomerRow",v)};return Ne(a,v=>{n.isOpen=!n.isOpen}),(v,g)=>(c(),r("div",to,[F(e("input",{type:"text",class:"text-base font-medium block rounded-md transition ease-in-out py-2 px-3 text-gray-700 placeholder-gray-400 border-none focus:outline-none text-right w-40 h-12 search-input",placeholder:"Type name",name:s.name,"onUpdate:modelValue":g[0]||(g[0]=m=>l(n).search=m),onInput:g[1]||(g[1]=(...m)=>l(d)&&l(d)(...m))},null,40,so),[[ue,l(n).search]]),F(w(l(he),{"animation-duration":2500,size:20,color:"grey"},null,512),[[te,i.value]]),i.value?L("",!0):(c(),B(l(Oe),{key:0})),l(n).isOpen?(c(),r("ul",{key:1,class:"mt-1 border-2 border-slate-50 overflow-auto shadow-lg rounded list-none max-h-40 w-40 absolute bg-white top-12",ref_key:"target",ref:a},[(c(!0),r(P,null,R(l(n).results,(m,C)=>(c(),r("li",{class:T(["hover:bg-blue-100 hover:text-blue-800","w-full list-none text-right py-2 px-3 cursor-pointer text-sm"]),key:C,onClick:M=>$(m)},[e("p",null,p(m.name),1),e("p",null,p(m.mobile),1)],8,oo))),128))],512)):L("",!0)]))}},lo=V(no,[["__scopeId","data-v-24042e55"]]),co={for:"countries",class:"block mb-2 text-xs font-semibold text-gray-600 dark:text-white"},ao=["value"],io={__name:"BaseSelect",props:{label:{type:String,default:""},options:{type:[Object],default:[]}},emits:["update:selected"],setup(t,{emit:o}){const s=t,n=k("card"),a=()=>{o("update:selected",n.value)};return(i,_)=>(c(),r("div",null,[e("label",co,p(s.label),1),F(e("select",{id:"countries","onUpdate:modelValue":_[0]||(_[0]=d=>n.value=d),onChange:a,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[(c(!0),r(P,null,R(t.options,d=>(c(),r("option",{value:d.value},p(d.label),9,ao))),256))],544),[[Ce,n.value]])]))}};const ro=t=>(X("data-v-7c78255e"),t=t(),Q(),t),uo={class:"flex flex-col justify-between h-full"},_o={class:"flex justify-between items-center control-wrapper"},po={key:0,class:"flex justify-between items-center px-6 py-3 customer-wrapper"},ho=["src"],vo={class:"flex justify-between items-center"},mo={key:2,class:"overflow-x-hidden overflow-y-scroll max-h-[40vh] hide-scrollbar"},fo={class:"relative flex flex-col justify-center"},go={class:"w-full p-4 bottom-4"},yo={key:0,class:"flex justify-between items-center px-6 py-3 mb-3 discount-wrapper"},bo=["src"],xo={class:"flex justify-between items-center"},wo={class:"customer-label"},$o={key:1,class:"flex justify-between items-center px-6 py-3 note-wrapper"},Co=["src"],ko={class:"flex justify-between items-center"},Ao={class:"customer-label"},So={class:"py-4"},Io={key:0},Do={key:1,class:"w-full flex justify-between items-center px-4"},jo={class:"flex justify-between"},Mo=ro(()=>e("span",{class:"mr-3"},"ر.س",-1)),Po={__name:"CartContentList",props:{buttonArray:Array,modalOneActive:Boolean},emits:["showModal"],setup(t,{emit:o}){const s=t,{t:n}=Y(),a=Z(),{customers:i,selectedCustomer:_}=D(Z()),d=j(),{carts:u,selectedCart:b,note:y,discount:$}=D(j()),v=pe(),g=q(),m=k(!1),C=k("card");_e(()=>{}),ke();const M=Ae(),S=k(!1),h=k(null),x=A=>{C.value=A},I=z(()=>{let A=0;return u.value.forEach(ne=>{A+=ne.service.pivot.price*ne.count}),A}),K=()=>{o("showModal")},U=A=>{a.setActiveCustomer(A)},N=()=>{a.setActiveCustomer(null)},W=()=>{},oe=()=>{if(u.value.length&&_.value){if(m.value)return;m.value=!0,v.createInvoice(u.value,y.value,$.value,_.value,C.value).then(A=>{h.value=A,S.value=!0,d.clear(),a.clear(),g.clear()}).catch(A=>{console.log(A)}).finally(()=>{m.value=!1})}else alert("select customer")},me=()=>{S.value=!S.value},fe=()=>{d.updateDiscount(0)},ge=()=>{d.updateNote("")},ye=()=>{setTimeout(()=>{M.push({name:"InvoiceList"}).then(A=>{console.log(A)}).catch(A=>{console.log(A)})},1e3)},be=k([{label:"Card",value:"card"},{label:"Cash",value:"cash"}]);return(A,ne)=>(c(),r(P,null,[w(eo,{title:"","modal-active":S.value,"invoice-data":h.value,onToggleModalActive:me,onViewInvoices:ye},null,8,["modal-active","invoice-data"]),e("div",uo,[e("div",null,[e("div",_o,[(c(!0),r(P,null,R(s.buttonArray,(G,ee)=>{var ae;return c(),B(Ft,{title:G.title,image:G.icon,key:ee,type:G.type,"no-bordder":ee===((ae=s.buttonArray)==null?void 0:ae.length)-1},null,8,["title","image","type","no-bordder"])}),128))]),l(_)?L("",!0):(c(),r("div",po,[e("button",{type:"button",onClick:K},[e("img",{class:"",src:"/images/home/plus.svg",alt:""},null,8,ho)]),e("div",vo,[w(lo,{source:"search",label:"name",onClickCustomerRow:U})])])),l(_)?(c(),B(ts,{key:1,customer:l(_),onHandleRemoveCustomer:N,onHandleEditCustomer:W},null,8,["customer"])):L("",!0),l(u).length>0?(c(),r("div",mo,[(c(!0),r(P,null,R(l(u),(G,ee)=>(c(),B(Dt,{key:ee,cart:G},null,8,["cart"]))),128))])):L("",!0)]),e("div",fo,[e("div",go,[l($)?(c(),r("div",yo,[e("button",{type:"button",onClick:fe},[e("img",{class:"",src:"/images/home/trash_grey.svg",alt:""},null,8,bo)]),e("div",xo,[e("span",wo,p(l(n)("dashboard.discount"))+" "+p(l($))+" ريال",1)])])):L("",!0),l(y).length>0?(c(),r("div",$o,[e("button",{type:"button",onClick:ge},[e("img",{class:"",src:"/images/home/close_grey.svg",alt:""},null,8,Co)]),e("div",ko,[e("span",Ao,p(l(n)("dashboard.note")),1)])])):L("",!0),e("div",So,[w(io,{label:"Select a payment method",options:be.value,"onUpdate:selected":x},null,8,["options"])]),e("div",{class:T(["create-invoice-button flex items-center py-4 justify-center",l(u).length>0&&l(_)&&!m.value?"enabled cursor-pointer":"disabled"]),onClick:oe},[l(u).length===0?(c(),r("span",Io,p(l(n)("dashboard.chooseWidget")),1)):(c(),r("div",Do,[e("div",jo,[Mo,e("span",null,p(I.value),1)]),e("span",null,p(l(n)("dashboard.createInvoice")),1),F(w(l(he),{"animation-duration":2500,size:25,color:"#fff"},null,512),[[te,m.value]])]))],2)])])])],64))}},Bo=V(Po,[["__scopeId","data-v-7c78255e"]]);const No=["src"],Oo={__name:"Piece",props:{piece:{type:Object}},emits:["handleClickPiece"],setup(t,{emit:o}){const s=t,n=q(),{selectedPiece:a}=D(q()),i=()=>{console.log("piece selected"),n.setSelectedPiece(s.piece)};return(_,d)=>{var b,y;const u=se("WidgetButton");return c(),B(u,{onHandleClick:i,noPadding:!1,selected:((b=l(a))==null?void 0:b.id)===((y=s.piece)==null?void 0:y.id)},{default:H(()=>{var $,v,g,m;return[e("img",{class:T((($=l(a))==null?void 0:$.id)===((v=s.piece)==null?void 0:v.id)?"selected-image":"unselected-image"),src:"/images/home/trousers.svg",alt:""},null,10,No),e("span",{class:T([((g=l(a))==null?void 0:g.id)===((m=s.piece)==null?void 0:m.id)?"text-main":"","widget-label"])},p(s.piece.piece_title),3)]}),_:1},8,["selected"])}}},Eo=V(Oo,[["__scopeId","data-v-240629e3"]]),Lo={class:"flex justify-end gap-4 flex-wrap"},Vo={__name:"PieceList",props:{pieces:{type:Array,default:[]},selectedPiece:{type:Object,default:null}},emits:["setActivePiece"],setup(t,{emit:o}){const s=n=>{console.log(`selected pieceId: ${n==null?void 0:n.id}`),o("setActivePiece",n)};return(n,a)=>(c(),r("div",Lo,[(c(!0),r(P,null,R(t.pieces,i=>(c(),B(Eo,{key:i==null?void 0:i.id,piece:i,onHandleClickPiece:s},null,8,["piece"]))),128))]))}},To={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none"},Ro=e("g",{"clip-path":"url(#a)"},[e("path",{fill:"#A1AABA",d:"M9 1.5a3.759 3.759 0 0 0-3.75 3.75A3.759 3.759 0 0 0 9 9a3.759 3.759 0 0 0 3.75-3.75A3.759 3.759 0 0 0 9 1.5Zm0 1.125a2.617 2.617 0 0 1 2.625 2.625A2.617 2.617 0 0 1 9 7.875 2.617 2.617 0 0 1 6.375 5.25 2.617 2.617 0 0 1 9 2.625ZM4.492 10.5A1.5 1.5 0 0 0 3 11.992v.57c0 1.352.855 2.398 1.99 3.024 1.135.626 2.573.914 4.01.914 1.437 0 2.875-.288 4.01-.914.968-.534 1.697-1.388 1.9-2.461H15v-1.133c0-.818-.675-1.492-1.492-1.492H4.492Zm0 1.125h9.016a.36.36 0 0 1 .368.367V12h-.001v.563c0 .898-.505 1.54-1.408 2.039-.904.498-2.185.773-3.467.773s-2.563-.275-3.467-.773c-.903-.5-1.408-1.141-1.408-2.04v-.57c0-.21.158-.367.367-.367Z"})],-1),Uo=e("defs",null,[e("clipPath",{id:"a"},[e("path",{fill:"#fff",d:"M0 0h18v18H0z"})])],-1),zo=[Ro,Uo];function Ho(t,o){return c(),r("svg",To,zo)}const Fo={render:Ho},Zo={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"21",fill:"none"},qo=e("path",{fill:"#C0C3C8",d:"M5.52.007c-.329-.024-.666.01-.997.107L3.34.464A3.77 3.77 0 0 0 .76 3.103C.02 5.91.866 9.235 3.07 12.978c2.201 3.737 4.709 6.112 7.541 6.887a3.839 3.839 0 0 0 3.617-.881l.9-.836a2.727 2.727 0 0 0 .345-3.6l-1.301-1.767a2.8 2.8 0 0 0-3.057-1.01l-2.035.609c-.085.025-.29-.091-.468-.245v-.001c-.318-.276-.757-.833-1.226-1.629v-.001c-.504-.855-.719-1.415-.805-1.745-.086-.33-.065-.37-.053-.483a.237.237 0 0 1 .078-.148l.001-.001 1.518-1.388a2.719 2.719 0 0 0 .642-3.133l-.915-1.997A2.782 2.782 0 0 0 5.52.006Zm-.108 1.496c.46.034.882.31 1.075.731l.916 1.997c.222.483.11 1.036-.29 1.402L5.596 7.02a1.74 1.74 0 0 0-.558 1.088 2.98 2.98 0 0 0 .092 1.03c.133.511.409 1.187.963 2.128.518.876 1.006 1.542 1.535 2.002.173.148.893.838 1.872.552h.003l2.044-.613c.53-.16 1.098.031 1.417.464l1.3 1.767a1.206 1.206 0 0 1-.156 1.61l-.9.837a2.363 2.363 0 0 1-2.201.533c-2.29-.627-4.556-2.655-6.644-6.201-2.09-3.55-2.745-6.487-2.153-8.733a2.288 2.288 0 0 1 1.556-1.58l1.182-.351c.154-.046.311-.061.464-.05Z"},null,-1),Ko=[qo];function Wo(t,o){return c(),r("svg",Zo,Ko)}const Go={render:Wo};const Jo=["src"],Yo={__name:"Service",props:{service:{type:Object}},emits:["handleClickService"],setup(t,{emit:o}){const s=t,n=re(),{selectedService:a}=D(re()),i=j();D(j()),q();const{selectedPiece:_}=D(q());z(()=>{var u;return(a==null?void 0:a.id)===((u=s.service)==null?void 0:u.id)});const d=()=>{o("handleClickService",s.service.id),n.setSelectedService(s.service),console.log(_.value.id);const u={pieceTitle:_.value.piece_title,pieceId:_.value.id,service:s.service,count:1,discount:0};i.addNewCart(u)};return(u,b)=>{var $,v;const y=se("ServiceButton");return c(),B(y,{onHandleClick:d,selected:(($=l(a))==null?void 0:$.id)===((v=s.service)==null?void 0:v.id),checked:s.service.is_checked>0},{default:H(()=>{var g,m,C,M,S;return[e("span",{class:T(["widget-label",((g=l(a))==null?void 0:g.id)===((m=s.service)==null?void 0:m.id)?"text-main":""])},p((C=s.service)==null?void 0:C.services_title),3),e("img",{class:T(((M=l(a))==null?void 0:M.id)===((S=s.service)==null?void 0:S.id)?"selected-image":"unselected-image"),src:"/images/home/remove_stain.svg",alt:""},null,10,Jo)]}),_:1},8,["selected","checked"])}}},Xo=V(Yo,[["__scopeId","data-v-d815e3a5"]]),Qo={class:"flex justify-end gap-4 flex-wrap"},en={__name:"ServiceList",props:{services:{type:Array,default:[]},selectedService:{type:Object,default:null}},setup(t){const o=s=>{};return(s,n)=>(c(),r("div",Qo,[(c(!0),r(P,null,R(t.services,a=>(c(),B(Xo,{key:a==null?void 0:a.id,service:a,onHandleClickService:o},null,8,["service"]))),128))]))}};const tn=50,sn=50,on=20;function nn(t,o,s){return{x:s.x+t*Math.cos(de(o)),y:s.y+t*Math.sin(de(o))}}function de(t){return t*Math.PI/180}function ln(t){let o=360/t.circles.length,s={};return t.circles.forEach((n,a)=>{s[a]=nn(on,o*a,{x:tn,y:sn})}),s}const cn={data(){return{circles:[{color:"#E0F2F1",radius:0},{color:"#B2DFDB",radius:0},{color:"#80CBC4",radius:0},{color:"#4DB6AC",radius:0},{color:"#26A69A",radius:0},{color:"#00897B",radius:0},{color:"#00796B",radius:0},{color:"#00695C",radius:0},{color:"#004D40",radius:0}],counter:0,interval:null}},computed:{circlePositions:ln},created(){this.interval=setInterval(()=>{this.counter++,this.circles=this.circles.map((t,o)=>({...t,radius:(this.counter+o)%8}))},70)},destroyed(){clearInterval(this.interval)}},an={class:"loading-spinner"},rn=["cx","cy","r","fill"];function dn(t,o,s,n,a,i){return c(),r("svg",an,[(c(!0),r(P,null,R(a.circles,(_,d)=>(c(),r("circle",{cx:i.circlePositions[d]&&i.circlePositions[d].x,cy:i.circlePositions[d]&&i.circlePositions[d].y,r:_.radius,fill:_.color,key:d},null,8,rn))),128))])}const un=V(cn,[["render",dn],["__scopeId","data-v-fe4f2036"]]);const _n=t=>(X("data-v-16cf1654"),t=t(),Q(),t),pn={class:"w-full px-4 py-3 border border-gray-100 flex justify-end items-center"},hn={class:"w-full px-4 py-3 border border-gray-100 flex justify-end items-center"},vn={class:"container mx-auto"},mn={class:"grid grid-cols-12 gap-5"},fn={class:"col-span-12 xl:col-span-4 md:col-span-6 lg:col-span-5"},gn={class:"col-span-12 xl:col-span-8 md:col-span-6 lg:col-span-7"},yn={class:"flex justify-end font-readex"},bn={key:0,class:"flex justify-center items-center"},xn={key:2,class:"w-full mt-7 services-wrapper"},wn=_n(()=>e("div",{class:"flex justify-end service-title"},"الخدمات",-1)),$n={__name:"Dashboards.v1",setup(t){const{t:o}=Y();ie();const{role:s,userEmail:n}=D(ie()),a=[{icon:"/images/home/discount.svg",title:o("dashboard.discount"),noBorder:!1,type:O.ADD_DISCOUNT},{icon:"/images/home/comments.svg",title:o("dashboard.note"),noBorder:!1,type:O.ADD_NOTE},{icon:"/images/home/delete.svg",title:o("dashboard.discard"),noBorder:!1,type:O.CANCEL},{icon:"/images/home/suspension.svg",title:o("dashboard.pause"),noBorder:!1,type:O.HOLD}],i=k(null),_=k(""),d=k(!1),u=q(),{pieces:b,selectedPiece:y,pieceSelected:$,loading:v}=D(q()),g=Z(),m=j();Se(()=>{u.fetch(),g.fetch()}),_e(()=>{console.log("Email:",n.value,"Role:",s.value),console.log(u.pieces)}),Ie(()=>{}),De(()=>{g.clear(),u.clear(),m.clear()}),je(()=>{a.forEach(h=>{switch(h.type){case O.ADD_DISCOUNT:h.title=o("dashboard.discount");break;case O.ADD_NOTE:h.title=o("dashboard.note");break;case O.CANCEL:h.title=o("dashboard.discard");break;case O.HOLD:h.title=o("dashboard.pause");break}})});const C=h=>{u.setSelectedPiece(h)},M=()=>{i.value.length?g.addNewCustomer({name:_.value,mobile:i.value.replace(/\s/g,"")}):console.log("phone number required"),_.value="",i.value=""},S=()=>{_.value="",i.value=""};return(h,x)=>{var U;const I=se("vue-tel-input"),K=se("FullHeightCard");return c(),r(P,null,[w(ce,{modelValue:d.value,"onUpdate:modelValue":x[2]||(x[2]=N=>d.value=N),title:l(o)("dashboard.addCustomer"),"button-label":l(o)("common.save"),button:"bg-main",onConfirm:M,onCancel:S},{default:H(()=>[e("div",pn,[F(e("input",{class:"w-full focus:outline-none text-right",type:"text",placeholder:"أحمد أحمد","onUpdate:modelValue":x[0]||(x[0]=N=>_.value=N)},null,512),[[ue,_.value]]),w(l(Fo),{class:"ml-2"})]),e("div",hn,[w(I,{modelValue:i.value,"onUpdate:modelValue":x[1]||(x[1]=N=>i.value=N)},null,8,["modelValue"]),w(l(Go),{class:"ml-2"})])]),_:1},8,["modelValue","title","button-label"]),e("div",vn,[e("div",mn,[e("div",fn,[w(K,null,{default:H(()=>[w(Bo,{"button-array":a,onShowModal:x[3]||(x[3]=N=>d.value=!0)})]),_:1})]),e("div",gn,[e("div",yn,p(l(o)("dashboard.pieceType")),1),l(v)?(c(),r("div",bn,[w(un)])):(c(),B(Vo,{key:1,pieces:l(b),onSetActivePiece:C},null,8,["pieces"])),l(y)?(c(),r("div",xn,[wn,w(en,{services:(U=l(y))==null?void 0:U.services},null,8,["services"])])):L("",!0)])])])],64)}}},Mn=V($n,[["__scopeId","data-v-16cf1654"]]);export{Mn as default};
