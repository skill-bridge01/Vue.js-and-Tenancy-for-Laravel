import{H as xe,o as c,c as r,a as e,I as Y,_ as T,u as X,x as D,r as k,t as p,b as l,E as $,q as L,F as B,p as se,g as oe,l as U,m as N,z as H,n as V,s as F,G as ee,e as E,d as R,J as we,K as $e,L as ue,v as Ce,k as _e,j as ke,M as Ae,D as te,y as ie,B as Se,C as Ie,N as De,w as je}from"./app-c03dcb6d.js";import{_ as ce,a as Me}from"./CardBoxModal-baf6546f.js";import{u as M,a as Z,C as O,b as pe,p as Pe}from"./print-5e7a1430.js";import{u as q}from"./pieces-95f341ac.js";import{a as Be,o as Ne,U as Oe}from"./user_black-1ae8a924.js";import{u as re}from"./services-9a07652a.js";import"./BaseIcon-398b9207.js";var le={appendKeyframes:(t,o)=>{if(!(window!=null&&window.document))return;const s=document.createElement("style");s.setAttribute("id",t),s.innerHTML=`@keyframes ${t} {${o}}`,document.body.appendChild(s)},removeKeyframes:t=>{var s;if(!(window!=null&&window.document))return;const o=document.getElementById(t);o&&((s=o.parentNode)==null||s.removeChild(o))}};const Ee={name:"SpringSpinner",props:{animationDuration:{type:Number,default:3e3},size:{type:Number,default:70},color:{type:String,default:"#fff"}},data(){return{animationName:`spring-spinner-animation-${Date.now()}`}},computed:{spinnerStyle(){return{height:`${this.size}px`,width:`${this.size}px`}},spinnerPartStyle(){return{height:`${this.size/2}px`,width:`${this.size}px`}},rotatorStyle(){return{height:`${this.size}px`,width:`${this.size}px`,borderRightColor:this.color,borderTopColor:this.color,borderWidth:`${this.size/7}px`,animationDuration:`${this.animationDuration}ms`,animationName:this.animationName}}},watch:{size:{handler:"updateAnimation",immediate:!0},color:{handler:"updateAnimation",immediate:!0}},mounted(){this.updateAnimation()},beforeUnmount(){le.removeKeyframes(this.animationName)},methods:{updateAnimation(){le.removeKeyframes(this.animationName),le.appendKeyframes(this.animationName,this.generateKeyframes())},generateKeyframes(){return`
        0% {
          border-width: ${this.size/7}px;
        }
        25% {
          border-width: ${this.size/23.33}px;
        }
        50% {
          transform: rotate(115deg);
          border-width: ${this.size/7}px;
        }
        75% {
          border-width: ${this.size/23.33}px;
          }
        100% {
          border-width: ${this.size/7}px;
        }`}}};function Le(t,o,s,n,a,i){return c(),r("div",{class:"spring-spinner",style:Y(i.spinnerStyle)},[e("div",{class:"spring-spinner-part top",style:Y(i.spinnerPartStyle)},[e("div",{class:"spring-spinner-rotator",style:Y(i.rotatorStyle)},null,4)],4),e("div",{class:"spring-spinner-part bottom",style:Y(i.spinnerPartStyle)},[e("div",{class:"spring-spinner-rotator",style:Y(i.rotatorStyle)},null,4)],4)],4)}var he=xe(Ee,[["render",Le]]);const Te={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"20",fill:"none"},Ve=e("path",{fill:"#45A9CB",d:"M3.75.5A3.262 3.262 0 0 0 .5 3.75v12.5a3.262 3.262 0 0 0 3.25 3.25h10.5a3.261 3.261 0 0 0 3.25-3.25V3.75A3.262 3.262 0 0 0 14.25.5H3.75Zm0 1.5h10.5c.975 0 1.75.775 1.75 1.75v12.5A1.74 1.74 0 0 1 14.25 18H3.75A1.74 1.74 0 0 1 2 16.25V3.75C2 2.775 2.775 2 3.75 2Zm.5 1.5a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm2.5 0a.75.75 0 1 0 0 1.5.75.75 0 0 0 0-1.5Zm6.75 0a1 1 0 1 0 0 2 1 1 0 0 0 0-2ZM9 6c-2.753 0-5 2.247-5 5 0 2.752 2.247 5 5 5 2.752 0 5-2.248 5-5 0-2.753-2.248-5-5-5Zm0 1.5c1.825 0 3.263 1.394 3.435 3.172-1.275.596-1.926.29-2.988-.121-.94-.365-2.205-.722-3.8-.29C5.993 8.692 7.32 7.5 9 7.5Zm-2.037 3.985c.126-.008.247-.007.363.003.548.048 1.025.246 1.58.461.875.34 1.99.698 3.33.367A3.48 3.48 0 0 1 9 14.5c-1.654 0-2.966-1.154-3.338-2.688.493-.192.922-.301 1.3-.327Z"},null,-1),Re=[Ve];function ze(t,o){return c(),r("svg",Te,Re)}const Ue={render:ze},He={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"4",fill:"none"},Fe=e("path",{fill:"#4BC49A",d:"M1.667.933a1.067 1.067 0 1 0 0 2.134h10.666a1.067 1.067 0 1 0 0-2.134H1.667Z"},null,-1),Ze=[Fe];function qe(t,o){return c(),r("svg",He,Ze)}const Ke={render:qe},We={xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",fill:"none"},Ge=e("path",{fill:"#4BC49A",d:"M6.984.585a1.067 1.067 0 0 0-1.05 1.082v4.266H1.666a1.067 1.067 0 1 0 0 2.134h4.266v4.266a1.067 1.067 0 1 0 2.134 0V8.067h4.266a1.067 1.067 0 1 0 0-2.134H8.067V1.667A1.067 1.067 0 0 0 6.984.585Z"},null,-1),Je=[Ge];function Ye(t,o){return c(),r("svg",We,Je)}const Xe={render:Ye},Qe={xmlns:"http://www.w3.org/2000/svg",width:"36",height:"36",fill:"none"},et=e("rect",{width:"35",height:"35",x:".5",y:".5",fill:"#FEF6FA",rx:"5.5"},null,-1),tt=e("path",{fill:"#FF5757",d:"M22.49 11.995a.501.501 0 0 0-.377.189l-9 11a.5.5 0 1 0 .774.632l9-11a.5.5 0 0 0-.398-.821Zm-7.99.338c-1.19 0-2.167.977-2.167 2.167v1.333c0 1.19.977 2.167 2.167 2.167s2.167-.976 2.167-2.167V14.5c0-1.19-.977-2.167-2.167-2.167Zm0 1c.648 0 1.167.52 1.167 1.167v1.333c0 .648-.52 1.167-1.167 1.167a1.162 1.162 0 0 1-1.167-1.167V14.5c0-.648.52-1.167 1.167-1.167Zm7 4.667c-1.19 0-2.167.977-2.167 2.167V21.5c0 1.19.977 2.167 2.167 2.167s2.167-.977 2.167-2.167v-1.333c0-1.19-.977-2.167-2.167-2.167Zm0 1c.648 0 1.167.519 1.167 1.167V21.5c0 .648-.52 1.167-1.167 1.167a1.162 1.162 0 0 1-1.167-1.167v-1.333c0-.648.52-1.167 1.167-1.167Z"},null,-1),st=e("rect",{width:"35",height:"35",x:".5",y:".5",stroke:"#FF5757",rx:"5.5"},null,-1),ot=[et,tt,st];function nt(t,o){return c(),r("svg",Qe,ot)}const ve={render:nt};const lt=t=>(se("data-v-ad5dd9a3"),t=t(),oe(),t),ct={class:"flex justify-between items-center px-6 py-3 cart-item-wrapper"},at={class:"flex items-center gap-4"},it=["src"],rt={class:"price-label"},dt={class:"price-label"},ut={class:"flex gap-2"},_t={class:""},pt={class:"widget-name-label"},ht={class:"quantity-wrapper font-readex text-main mt-2 p-2 font-semibold text-sm"},vt=["src"],mt=["src"],gt=["src"],ft={class:"flex justify-end items-center mr-7 ml-4 px-4 py-3 gap-2 urgent-wash-wrapper"},yt={class:"urgent-wash-label"},bt={key:0,class:"flex justify-between items-center mr-5 ml-4 py-3 gap-2 urgent-wash-wrapper"},xt={class:""},wt={class:"text-right description-label"},$t={class:"flex items-center justify-between gap-1"},Ct=lt(()=>e("span",null,"ريال",-1)),kt=["value"],At={class:"text-right description-label"},St={class:"flex items-center justify-between w-32 border rounded-lg overflow-hidden"},It={key:1,class:"flex"},Dt=["value"],jt={__name:"CartItem",props:{cart:Object},setup(t){const o=t,{t:s}=X(),n=M();D(M());const a=k(1),i=k(!1),_=k(""),u=k(""),d=h=>{u.value=h.target.value,n.changeCartDiscount(o.cart,h.target.value)},w=h=>{console.log("Note",o.cart.service.id,h.target.value),_.value=h.target.value,n.changeCartNote(o.cart,h.target.value)},y=()=>{a.value-=1,n.changeCartCount(o.cart,-1)},C=()=>{console.log("props.cart",o.cart.service.id),a.value+=1,n.changeCartCount(o.cart,1)},v=()=>{i.value=!i.value},m=()=>{n.removeCart(o.cart)};return(h,A)=>{var P,I,f,b,x;return c(),r(B,null,[e("div",ct,[e("div",at,[e("button",{type:"button",onClick:m},[e("img",{class:"",src:"/images/home/close_grey.svg",alt:""},null,8,it)]),e("span",rt,p(l(s)("dashboard.currency")),1),e("span",dt,p((P=t.cart)==null?void 0:P.service.pivot.price),1)]),e("div",ut,[e("div",_t,[e("div",pt,p((I=t.cart)==null?void 0:I.pieceTitle),1),e("div",ht,p(l(s)("dashboard.count"))+" "+p((f=t.cart)==null?void 0:f.count),1)]),e("div",null,[e("img",{class:"",src:"/images/home/trousers.svg",alt:""},null,8,vt)]),e("div",{class:"flex justify-center items-center cursor-pointer",onClick:v},[i.value?(c(),r("img",{key:1,class:"",src:"/images/home/arrow_up_grey.svg",alt:""},null,8,gt)):(c(),r("img",{key:0,class:"",src:"/images/home/arrow_down_grey.svg",alt:""},null,8,mt))])])]),e("div",ft,[e("p",yt,p((b=t.cart)==null?void 0:b.service.services_title),1),$(l(Ue))]),i.value?(c(),r("div",bt,[e("div",xt,[e("div",wt,p(l(s)("dashboard.discount")),1),e("div",$t,[Ct,$(l(ve)),e("input",{type:"text",placeholder:"0",value:u.value,class:"border px-1 py-1 rounded-lg text-right focus:outline-none max-w-[140px] h-9",onInput:d},null,40,kt)])]),e("div",null,[e("div",At,p(l(s)("dashboard.pieceCount")),1),e("div",St,[e("div",{class:"minus-button cursor-pointer",onClick:y},[$(l(Ke))]),e("div",null,p(((x=t.cart)==null?void 0:x.count)||a.value),1),e("div",{class:"minus-button cursor-pointer",onClick:C},[$(l(Xe))])])])])):L("",!0),i.value?(c(),r("div",It,[e("input",{type:"text",placeholder:"Note",value:_.value,class:"border px-4 py-2 rounded-lg text-right focus:outline-none w-full mx-5",onInput:w},null,40,Dt)])):L("",!0)],64)}}},Mt=T(jt,[["__scopeId","data-v-ad5dd9a3"]]),Pt={class:"w-full px-4 py-3 border border-gray-100 flex justify-end items-center"},Bt=["value"],Nt={__name:"AddNoteModal",props:{modalActive:Boolean},emits:["toggleModalActive"],setup(t,{emit:o}){const s=t,{t:n}=X(),a=U({get(){return s.modalActive},set(y){o("toggleModalActive",y)}}),i=M(),{note:_}=D(M()),u=k(_),d=y=>{u.value=y.target.value},w=()=>{console.log("confirm"),i.updateNote(u.value)};return(y,C)=>(c(),N(ce,{modelValue:a.value,"onUpdate:modelValue":C[0]||(C[0]=v=>a.value=v),title:l(n)("dashboard.note"),"button-label":l(n)("common.save"),button:"bg-main",onConfirm:w},{default:H(()=>[e("div",Pt,[e("textarea",{class:"w-full focus:outline-none text-right",value:u.value,placeholder:"أحمد أحمد",onInput:d},`
      `,40,Bt)])]),_:1},8,["modelValue","title","button-label"]))}};const Ot=t=>(se("data-v-252a9f4c"),t=t(),oe(),t),Et={class:"w-full px-4 py-3 flex justify-center"},Lt={class:""},Tt={class:"text-right description-label"},Vt={class:"flex items-center justify-between gap-1"},Rt=Ot(()=>e("span",null,"ريال",-1)),zt=["value"],Ut={__name:"AddDiscountModal",props:{modalActive:Boolean},emits:["toggleModalActive"],setup(t,{emit:o}){const s=t,{t:n}=X(),a=U({get(){return s.modalActive},set(d){o("toggleModalActive",d)}});M();const{discount:i}=D(M()),_=k(i),u=d=>{_.value=parseFloat(d.target.value)||0};return(d,w)=>(c(),N(ce,{modelValue:a.value,"onUpdate:modelValue":w[0]||(w[0]=y=>a.value=y),title:l(n)("dashboard.addDiscount"),"button-label":l(n)("common.save"),button:"bg-main"},{default:H(()=>[e("div",Et,[e("div",Lt,[e("div",Tt,p(l(n)("dashboard.discount")),1),e("div",Vt,[Rt,$(l(ve)),e("input",{type:"text",placeholder:"0",class:"border px-1 py-1 rounded-lg text-right focus:outline-none h-9",value:_.value,onInput:u},null,40,zt)])])])]),_:1},8,["modelValue","title","button-label"]))}},Ht=T(Ut,[["__scopeId","data-v-252a9f4c"]]),Ft=["src"],Zt={class:"font-medium text-sm font-readex"},qt={__name:"CartButton",props:{image:String,title:String,noBordder:Boolean,type:Number},setup(t){const o=t,s=k(!1),n=k(!1),a=M(),i=Z(),_=()=>{switch(console.log("button click"),s.value=!1,n.value=!1,o.type){case O.ADD_DISCOUNT:n.value=!0;break;case O.ADD_NOTE:s.value=!0;break;case O.CANCEL:a.clear(),i.clear();break}},u=w=>{s.value=w},d=w=>{n.value=w};return(w,y)=>(c(),r(B,null,[$(Nt,{"modal-active":s.value,onToggleModalActive:u},null,8,["modal-active"]),$(Ht,{"modal-active":n.value,onToggleModalActive:d},null,8,["modal-active"]),e("div",{class:V(["flex flex-col justify-center items-center flex-1",o.noBordder?"":"border-r"])},[e("button",{type:"button",onClick:_},[e("img",{class:"",src:o.image,alt:""},null,8,Ft)]),e("p",Zt,p(o.title),1)],2)],64))}};const Kt={class:"flex justify-between items-center px-6 py-3 customer-wrapper"},Wt={class:"flex items-center gap-4"},Gt=["src"],Jt=["src"],Yt={class:"flex justify-end items-center"},Xt={class:"name-label font-readex font-normal text-[16px]"},Qt={type:"button"},es=["src"],ts={class:"name-label font-readex font-light text-[16px]"},ss={__name:"CustomerList",props:{customer:Object},emits:["handleRemoveCustomer","handleEditCustomer"],setup(t,{emit:o}){const s=t,n=()=>{o("handleRemoveCustomer",s.customer)},a=()=>{o("handleEditCustomer",s.customer)};return(i,_)=>{var u,d;return c(),r("div",Kt,[e("div",Wt,[e("button",{type:"button",onClick:n},[e("img",{class:"",src:"/images/home/trash_red.svg",alt:""},null,8,Gt)]),e("button",{type:"button",onClick:a},[e("img",{class:"",src:"/images/home/edit_grey.svg",alt:""},null,8,Jt)])]),e("div",null,[e("div",Yt,[e("span",Xt,p((u=t.customer)==null?void 0:u.name),1),e("button",Qt,[e("img",{class:"",src:"/images/home/placeholder_user.svg",alt:""},null,8,es)])]),e("span",ts,p((d=t.customer)==null?void 0:d.mobile),1)])])}}},os=T(ss,[["__scopeId","data-v-d6d7024a"]]);const g=t=>(se("data-v-d97d23df"),t=t(),oe(),t),ns={class:"invoice-container z-50 overflow-scroll"},ls={class:"content-wrapper bg-white"},cs={class:"company-header"},as=g(()=>e("div",{class:"company-name"},[E(" اسم الشركة "),e("br"),E(" المملكة العربية السعودية - جدة - شارع "),e("p",null,"+966 65489415")],-1)),is={class:"company-logo"},rs=["src"],ds=g(()=>e("div",{class:"invoice-title-wrapper"},[E(" فاتورة "),e("br"),E(" INV-23-16574 ")],-1)),us=g(()=>e("div",{class:"line"},null,-1)),_s={class:"customer-info"},ps={class:"flex gap-1 items-center justify-end"},hs=g(()=>e("span",null,"الزبون",-1)),vs=g(()=>e("span",null,"رقم الهاتف",-1)),ms={class:"invoice-table-wrapper"},gs=g(()=>e("thead",null,[e("tr",null,[e("th",null,"الإجمالي"),e("th",null,"الخدمة"),e("th",null,"العدد"),e("th",null,"نوع القطعة")])],-1)),fs=g(()=>e("span",null,"ر.س",-1)),ys=g(()=>e("span",null,"ر.س",-1)),bs=g(()=>e("td",null,null,-1)),xs=g(()=>e("td",null,null,-1)),ws=g(()=>e("td",null,"المجموع",-1)),$s=g(()=>e("span",null,"ر.س",-1)),Cs=g(()=>e("td",null,null,-1)),ks=g(()=>e("td",null,null,-1)),As=g(()=>e("td",null,"الخصم",-1)),Ss=g(()=>e("span",null,"ر.س",-1)),Is=g(()=>e("td",null,null,-1)),Ds=g(()=>e("td",null,null,-1)),js=g(()=>e("td",null,"المجموع الكلي",-1)),Ms={key:0,class:"note-wrapper"},Ps=g(()=>e("span",null,"ملاحظات:",-1)),Bs={class:"sign-wrapper"},Ns={class:"note-wrapper"},Os=g(()=>e("span",null,"التاريخ",-1)),Es={class:"note-wrapper"},Ls=g(()=>e("span",null,"بواسطة",-1)),Ts=g(()=>e("div",{class:"line"},null,-1)),Vs={class:"footer"},Rs=g(()=>e("p",null,"شكراً لطبلكم خدماتنا",-1)),zs=g(()=>e("p",null,"www.website.com",-1)),Us={class:"social-wrapper"},Hs=["src"],Fs=["src"],Zs=g(()=>e("p",null,"social.account",-1)),qs={class:"button-wrapper"},Ks={class:"flex justify-center items-center gap-2"},Ws=g(()=>e("span",{class:"print-label"},"طباعة",-1)),Gs=["src"],Js=g(()=>e("span",{class:"download-label"},"PDF",-1)),Ys=["src"],Xs={class:"flex justify-center items-center gap-2"},Qs=g(()=>e("span",{class:"print-label"},"إذهب إلى الفواتير",-1)),eo=["src"],to={__name:"InvoiceModal",props:{modalActive:Boolean,invoiceData:Object},emits:["toggleModalActive","viewInvoices"],setup(t,{emit:o}){const s=t,{selectedCustomer:n}=D(Z()),{carts:a,note:i,discount:_}=D(M()),u=pe(),d=U({get(){return s.modalActive},set(f){o("toggleModalActive",f)}}),w=U(()=>{let f=0;return a.value.forEach(b=>{f+=b.service.pivot.price*b.count}),f});U(()=>{let f=0;return a.value.forEach(b=>{f+=b.discount}),f});const y=()=>{console.log(_.value);let f=0;return a.value.forEach(x=>{f+=x.service.pivot.price*x.count}),f*((parseFloat(_.value)||0)/100)},C=()=>{o("toggleModalActive",!1)},v=()=>C(),m=()=>{I()},h=()=>{P()},A=()=>{o("toggleModalActive",!1),o("viewInvoices")},P=()=>{u.downloadInvoice(s.invoiceData.id,window.location.origin).then(f=>{const b=window.URL.createObjectURL(new Blob([f],{type:"application/pdf"}));Pe(b)}).catch(f=>{console.log(f)})},I=()=>{u.downloadInvoice(s.invoiceData.id,window.location.origin).then(f=>{const b=window.URL.createObjectURL(new Blob([f],{type:"application/pdf"})),x=document.createElement("a");x.href=b,x.setAttribute("download","invoice.pdf"),document.body.appendChild(x),x.click()}).catch(f=>{console.log(f)})};return(f,b)=>F((c(),N(Me,{onOverlayClick:v},{default:H(()=>{var x,K,W,z;return[e("div",ns,[F(e("div",{class:V(["invoice-wrapper mt-36 shadow-lg w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12 z-50 dark:bg-slate-900",d.value?"":"hidden"])},[e("div",ls,[e("div",cs,[as,e("div",is,[e("img",{src:"/images/home/company_logo.svg",alt:"logo"},null,8,rs)])]),ds,us,e("div",_s,[e("p",ps,[e("span",null,p(((x=l(n))==null?void 0:x.name)||"أحمد أحمد")+":",1),hs]),e("p",null,[e("span",null,p(((K=l(n))==null?void 0:K.mobile)||"+966 45648153"),1),E(" : "),vs])]),e("div",ms,[e("table",null,[gs,e("tbody",null,[(c(!0),r(B,null,R(l(a),(j,ne)=>(c(),r("tr",{key:ne},[e("td",null,[fs,E(),e("span",null,p(j.service.pivot.price),1)]),e("td",null,p(j.service.services_title),1),e("td",null,p(j.count),1),e("td",null,p(j.pieceTitle),1)]))),128)),e("tr",null,[e("td",null,[ys,E(),e("span",null,p(w.value),1)]),bs,xs,ws]),e("tr",null,[e("td",null,[$s,E(),e("span",null,p(y().toFixed(2)),1)]),Cs,ks,As]),e("tr",null,[e("td",null,[Ss,E(),e("span",null,p((w.value-y()).toFixed(2)),1)]),Is,Ds,js])])])]),(W=t.invoiceData)!=null&&W.note&&t.invoiceData.note.length?(c(),r("div",Ms,[e("span",null,p(t.invoiceData.note),1),Ps])):L("",!0),e("div",Bs,[e("div",Ns,[e("span",null,p(l(we)(new Date,"dd-MM-yyyy HH:mm:ss")),1),E(" : "),Os]),e("div",Es,[e("span",null,p(((z=l(n))==null?void 0:z.name)||"David John"),1),E(" : "),Ls])]),Ts,e("div",Vs,[Rs,zs,e("div",Us,[e("img",{src:"/images/home/twitter.svg",alt:"twitter"},null,8,Hs),e("img",{src:"/images/home/facebook.svg",alt:"facebook"},null,8,Fs),Zs])])]),e("div",qs,[e("div",Ks,[e("div",{class:"bg-brandGreen rounded-lg flex px-6 py-3 justify-center items-center gap-2.5 cursor-pointer",onClick:h},[Ws,e("img",{src:"/images/home/print_white.svg",alt:"printer"},null,8,Gs)]),e("div",{class:"bg-white rounded-lg flex px-6 py-3 justify-center items-center gap-2.5 cursor-pointer",onClick:m},[Js,e("img",{src:"/images/home/download_black.svg",alt:"printer"},null,8,Ys)])]),e("div",Xs,[e("div",{class:"flex px-6 py-3 justify-center items-center gap-2.5 cursor-pointer",onClick:A},[Qs,e("img",{src:"/images/home/invoice_white.svg",alt:"printer"},null,8,eo)])])])],2),[[ee,d.value]])])]}),_:1},512)),[[ee,d.value]])}},so=T(to,[["__scopeId","data-v-d97d23df"]]);const oo={class:"my-2 relative z-40 flex items-center"},no=["name"],lo=["onClick"],co={__name:"CustomerAutocomplete",props:{name:{type:String,required:!1,default:"autocomplete"},source:{type:[String,Array,Function],required:!0,default:""},label:{type:String,required:!1,default:"name"},responseProperty:{type:String,required:!1,default:"name"}},emits:["clickCustomerRow"],setup(t,{emit:o}){const s=t;let n=$e({search:"",isOpen:!1,results:[]});const a=k(null),i=k(!1),_=Z();D(Z());const u=Be(()=>{if(console.log(n.search),!s.source||!n.search)return!1;switch(n.isOpen=!0,!0){case typeof s.source=="string":return w(n.search);case typeof s.source=="function":return s.source(n.search).then(v=>{n.results=y(v)});case Array.isArray(s.source):return d(s.source);default:throw new Error("typeof source is "+typeof s.source)}},500),d=(v,m="")=>{n.results=v.filter(h=>h.name.toLowerCase().indexOf(n.search.toLowerCase())>-1)},w=v=>{i.value=!0,_.search(v).then(m=>{i.value=!1,console.log(m),n.results=m}).catch(m=>{console.log(m),i.value=!1})},y=v=>{if(s.responseProperty){let m;return JSON.stringify(v,(h,A)=>(A&&A[s.responseProperty]&&(m=A[s.responseProperty]),A)),m}return Array.isArray(v)?v:[]},C=v=>{n.search=v[s.label],n.isOpen=!1,o("clickCustomerRow",v)};return Ne(a,v=>{n.isOpen=!n.isOpen}),(v,m)=>(c(),r("div",oo,[F(e("input",{type:"text",class:"text-base font-medium block rounded-md transition ease-in-out py-2 px-3 text-gray-700 placeholder-gray-400 border-none focus:outline-none text-right w-40 h-12 search-input",placeholder:"Type name",name:s.name,"onUpdate:modelValue":m[0]||(m[0]=h=>l(n).search=h),onInput:m[1]||(m[1]=(...h)=>l(u)&&l(u)(...h))},null,40,no),[[ue,l(n).search]]),F($(l(he),{"animation-duration":2500,size:20,color:"grey"},null,512),[[ee,i.value]]),i.value?L("",!0):(c(),N(l(Oe),{key:0})),l(n).isOpen?(c(),r("ul",{key:1,class:"mt-1 border-2 border-slate-50 overflow-auto shadow-lg rounded list-none max-h-40 w-40 absolute bg-white top-12",ref_key:"target",ref:a},[(c(!0),r(B,null,R(l(n).results,(h,A)=>(c(),r("li",{class:V(["hover:bg-blue-100 hover:text-blue-800","w-full list-none text-right py-2 px-3 cursor-pointer text-sm"]),key:A,onClick:P=>C(h)},[e("p",null,p(h.name),1),e("p",null,p(h.mobile),1)],8,lo))),128))],512)):L("",!0)]))}},ao=T(co,[["__scopeId","data-v-24042e55"]]),io={for:"countries",class:"block mb-2 text-xs font-semibold text-gray-600 dark:text-white"},ro=["value"],uo={__name:"BaseSelect",props:{label:{type:String,default:""},options:{type:[Object],default:[]}},emits:["update:selected"],setup(t,{emit:o}){const s=t,n=k("card"),a=()=>{o("update:selected",n.value)};return(i,_)=>(c(),r("div",null,[e("label",io,p(s.label),1),F(e("select",{id:"countries","onUpdate:modelValue":_[0]||(_[0]=u=>n.value=u),onChange:a,class:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"},[(c(!0),r(B,null,R(t.options,u=>(c(),r("option",{value:u.value},p(u.label),9,ro))),256))],544),[[Ce,n.value]])]))}};const _o=t=>(se("data-v-e7b5bad8"),t=t(),oe(),t),po={class:"flex flex-col justify-between h-full"},ho={class:"flex justify-between items-center control-wrapper"},vo={key:0,class:"flex justify-between items-center px-6 py-3 customer-wrapper"},mo=["src"],go={class:"flex justify-between items-center"},fo={key:2,class:"overflow-x-hidden overflow-y-scroll max-h-[40vh] hide-scrollbar"},yo={class:"relative flex flex-col justify-center"},bo={class:"w-full p-4 bottom-4"},xo={key:0,class:"flex justify-between items-center px-6 py-3 mb-3 discount-wrapper"},wo=["src"],$o={class:"flex justify-between items-center"},Co={class:"customer-label"},ko={key:1,class:"flex justify-between items-center px-6 py-3 note-wrapper"},Ao=["src"],So={class:"flex justify-between items-center"},Io={class:"customer-label"},Do={class:"py-4"},jo={key:0},Mo={key:1,class:"w-full flex justify-between items-center px-4"},Po={class:"flex justify-between"},Bo=_o(()=>e("span",{class:"mr-3"},"ر.س",-1)),No={__name:"CartContentList",props:{buttonArray:Array,modalOneActive:Boolean},emits:["showModal"],setup(t,{emit:o}){const s=t,{t:n}=X(),a=Z(),{customers:i,selectedCustomer:_}=D(Z()),u=M(),{carts:d,selectedCart:w,note:y,discount:C}=D(M()),v=pe(),m=q(),h=k(!1),A=k("card");_e(()=>{}),ke();const P=Ae(),I=k(!1),f=k(null),b=S=>{A.value=S},x=U(()=>{let S=0;return d.value.forEach(J=>{S+=J.service.pivot.price*J.count}),S}),K=()=>{o("showModal")},W=S=>{a.setActiveCustomer(S)},z=()=>{a.setActiveCustomer(null)},j=()=>{},ne=()=>{if(console.log("carts",d.value),d.value.length&&_.value){if(h.value)return;h.value=!0,v.createInvoice(d.value,y.value,C.value,_.value,A.value).then(S=>{f.value=S,I.value=!0,u.clear(),a.clear(),m.clear()}).catch(S=>{console.log(S)}).finally(()=>{h.value=!1})}else alert("select customer")},me=()=>{I.value=!I.value},ge=()=>{u.updateDiscount(0)},fe=()=>{u.updateNote("")},ye=()=>{setTimeout(()=>{P.push({name:"InvoiceList"}).then(S=>{console.log(S)}).catch(S=>{console.log(S)})},1e3)},be=k([{label:"Card",value:"card"},{label:"Cash",value:"cash"}]);return(S,J)=>(c(),r(B,null,[$(so,{title:"","modal-active":I.value,"invoice-data":f.value,onToggleModalActive:me,onViewInvoices:ye},null,8,["modal-active","invoice-data"]),e("div",po,[e("div",null,[e("div",ho,[(c(!0),r(B,null,R(s.buttonArray,(G,Q)=>{var ae;return c(),N(qt,{title:G.title,image:G.icon,key:Q,type:G.type,"no-bordder":Q===((ae=s.buttonArray)==null?void 0:ae.length)-1},null,8,["title","image","type","no-bordder"])}),128))]),l(_)?L("",!0):(c(),r("div",vo,[e("button",{type:"button",onClick:K},[e("img",{class:"",src:"/images/home/plus.svg",alt:""},null,8,mo)]),e("div",go,[$(ao,{source:"search",label:"name",onClickCustomerRow:W})])])),l(_)?(c(),N(os,{key:1,customer:l(_),onHandleRemoveCustomer:z,onHandleEditCustomer:j},null,8,["customer"])):L("",!0),l(d).length>0?(c(),r("div",fo,[(c(!0),r(B,null,R(l(d),(G,Q)=>(c(),N(Mt,{key:Q,cart:G},null,8,["cart"]))),128))])):L("",!0)]),e("div",yo,[e("div",bo,[l(C)?(c(),r("div",xo,[e("button",{type:"button",onClick:ge},[e("img",{class:"",src:"/images/home/trash_grey.svg",alt:""},null,8,wo)]),e("div",$o,[e("span",Co,p(l(n)("dashboard.discount"))+" "+p(l(C))+" ريال",1)])])):L("",!0),l(y).length>0?(c(),r("div",ko,[e("button",{type:"button",onClick:fe},[e("img",{class:"",src:"/images/home/close_grey.svg",alt:""},null,8,Ao)]),e("div",So,[e("span",Io,p(l(y)),1)])])):L("",!0),e("div",Do,[$(uo,{label:"Select a payment method",options:be.value,"onUpdate:selected":b},null,8,["options"])]),e("div",{class:V(["create-invoice-button flex items-center py-4 justify-center",l(d).length>0&&l(_)&&!h.value?"enabled cursor-pointer":"disabled"]),onClick:J[0]||(J[0]=G=>l(d).length>0&&l(_)?ne():"")},[l(d).length===0?(c(),r("span",jo,p(l(n)("dashboard.chooseWidget")),1)):(c(),r("div",Mo,[e("div",Po,[Bo,e("span",null,p(x.value),1)]),e("span",null,p(l(n)("dashboard.createInvoice")),1),F($(l(he),{"animation-duration":2500,size:25,color:"#fff"},null,512),[[ee,h.value]])]))],2)])])])],64))}},Oo=T(No,[["__scopeId","data-v-e7b5bad8"]]);const Eo=["src"],Lo={__name:"Piece",props:{piece:{type:Object}},emits:["handleClickPiece"],setup(t,{emit:o}){const s=t,n=q(),{selectedPiece:a}=D(q()),i=()=>{console.log("piece selected"),n.setSelectedPiece(s.piece)};return(_,u)=>{var w,y;const d=te("WidgetButton");return c(),N(d,{onHandleClick:i,noPadding:!1,selected:((w=l(a))==null?void 0:w.id)===((y=s.piece)==null?void 0:y.id)},{default:H(()=>{var C,v,m,h;return[e("img",{class:V(((C=l(a))==null?void 0:C.id)===((v=s.piece)==null?void 0:v.id)?"selected-image":"unselected-image"),src:"/images/home/trousers.svg",alt:""},null,10,Eo),e("span",{class:V([((m=l(a))==null?void 0:m.id)===((h=s.piece)==null?void 0:h.id)?"text-main":"","widget-label"])},p(s.piece.piece_title),3)]}),_:1},8,["selected"])}}},To=T(Lo,[["__scopeId","data-v-240629e3"]]),Vo={class:"flex justify-end gap-4 flex-wrap"},Ro={__name:"PieceList",props:{pieces:{type:Array,default:[]},selectedPiece:{type:Object,default:null}},emits:["setActivePiece"],setup(t,{emit:o}){const s=n=>{console.log(`selected pieceId: ${n==null?void 0:n.id}`),o("setActivePiece",n)};return(n,a)=>(c(),r("div",Vo,[(c(!0),r(B,null,R(t.pieces,i=>(c(),N(To,{key:i==null?void 0:i.id,piece:i,onHandleClickPiece:s},null,8,["piece"]))),128))]))}},zo={xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",fill:"none"},Uo=e("g",{"clip-path":"url(#a)"},[e("path",{fill:"#A1AABA",d:"M9 1.5a3.759 3.759 0 0 0-3.75 3.75A3.759 3.759 0 0 0 9 9a3.759 3.759 0 0 0 3.75-3.75A3.759 3.759 0 0 0 9 1.5Zm0 1.125a2.617 2.617 0 0 1 2.625 2.625A2.617 2.617 0 0 1 9 7.875 2.617 2.617 0 0 1 6.375 5.25 2.617 2.617 0 0 1 9 2.625ZM4.492 10.5A1.5 1.5 0 0 0 3 11.992v.57c0 1.352.855 2.398 1.99 3.024 1.135.626 2.573.914 4.01.914 1.437 0 2.875-.288 4.01-.914.968-.534 1.697-1.388 1.9-2.461H15v-1.133c0-.818-.675-1.492-1.492-1.492H4.492Zm0 1.125h9.016a.36.36 0 0 1 .368.367V12h-.001v.563c0 .898-.505 1.54-1.408 2.039-.904.498-2.185.773-3.467.773s-2.563-.275-3.467-.773c-.903-.5-1.408-1.141-1.408-2.04v-.57c0-.21.158-.367.367-.367Z"})],-1),Ho=e("defs",null,[e("clipPath",{id:"a"},[e("path",{fill:"#fff",d:"M0 0h18v18H0z"})])],-1),Fo=[Uo,Ho];function Zo(t,o){return c(),r("svg",zo,Fo)}const qo={render:Zo},Ko={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"21",fill:"none"},Wo=e("path",{fill:"#C0C3C8",d:"M5.52.007c-.329-.024-.666.01-.997.107L3.34.464A3.77 3.77 0 0 0 .76 3.103C.02 5.91.866 9.235 3.07 12.978c2.201 3.737 4.709 6.112 7.541 6.887a3.839 3.839 0 0 0 3.617-.881l.9-.836a2.727 2.727 0 0 0 .345-3.6l-1.301-1.767a2.8 2.8 0 0 0-3.057-1.01l-2.035.609c-.085.025-.29-.091-.468-.245v-.001c-.318-.276-.757-.833-1.226-1.629v-.001c-.504-.855-.719-1.415-.805-1.745-.086-.33-.065-.37-.053-.483a.237.237 0 0 1 .078-.148l.001-.001 1.518-1.388a2.719 2.719 0 0 0 .642-3.133l-.915-1.997A2.782 2.782 0 0 0 5.52.006Zm-.108 1.496c.46.034.882.31 1.075.731l.916 1.997c.222.483.11 1.036-.29 1.402L5.596 7.02a1.74 1.74 0 0 0-.558 1.088 2.98 2.98 0 0 0 .092 1.03c.133.511.409 1.187.963 2.128.518.876 1.006 1.542 1.535 2.002.173.148.893.838 1.872.552h.003l2.044-.613c.53-.16 1.098.031 1.417.464l1.3 1.767a1.206 1.206 0 0 1-.156 1.61l-.9.837a2.363 2.363 0 0 1-2.201.533c-2.29-.627-4.556-2.655-6.644-6.201-2.09-3.55-2.745-6.487-2.153-8.733a2.288 2.288 0 0 1 1.556-1.58l1.182-.351c.154-.046.311-.061.464-.05Z"},null,-1),Go=[Wo];function Jo(t,o){return c(),r("svg",Ko,Go)}const Yo={render:Jo};const Xo=["src"],Qo={__name:"Service",props:{service:{type:Object}},emits:["handleClickService"],setup(t,{emit:o}){const s=t,n=re(),{selectedService:a}=D(re()),i=M();D(M()),q();const{selectedPiece:_}=D(q());U(()=>{var d;return(a==null?void 0:a.id)===((d=s.service)==null?void 0:d.id)});const u=()=>{o("handleClickService",s.service.id),n.setSelectedService(s.service),console.log(_.value.id);const d={pieceTitle:_.value.piece_title,pieceId:_.value.id,service:s.service,count:1,discount:0};i.addNewCart(d)};return(d,w)=>{var C,v;const y=te("ServiceButton");return c(),N(y,{onHandleClick:u,selected:((C=l(a))==null?void 0:C.id)===((v=s.service)==null?void 0:v.id),checked:s.service.is_checked>0},{default:H(()=>{var m,h,A,P,I;return[e("span",{class:V(["widget-label",((m=l(a))==null?void 0:m.id)===((h=s.service)==null?void 0:h.id)?"text-main":""])},p((A=s.service)==null?void 0:A.services_title),3),e("img",{class:V(((P=l(a))==null?void 0:P.id)===((I=s.service)==null?void 0:I.id)?"selected-image":"unselected-image"),src:"/images/home/remove_stain.svg",alt:""},null,10,Xo)]}),_:1},8,["selected","checked"])}}},en=T(Qo,[["__scopeId","data-v-d815e3a5"]]),tn={class:"flex justify-end gap-4 flex-wrap"},sn={__name:"ServiceList",props:{services:{type:Array,default:[]},selectedService:{type:Object,default:null}},setup(t){const o=s=>{};return(s,n)=>(c(),r("div",tn,[(c(!0),r(B,null,R(t.services,a=>(c(),N(en,{key:a==null?void 0:a.id,service:a,onHandleClickService:o},null,8,["service"]))),128))]))}};const on=50,nn=50,ln=20;function cn(t,o,s){return{x:s.x+t*Math.cos(de(o)),y:s.y+t*Math.sin(de(o))}}function de(t){return t*Math.PI/180}function an(t){let o=360/t.circles.length,s={};return t.circles.forEach((n,a)=>{s[a]=cn(ln,o*a,{x:on,y:nn})}),s}const rn={data(){return{circles:[{color:"#E0F2F1",radius:0},{color:"#B2DFDB",radius:0},{color:"#80CBC4",radius:0},{color:"#4DB6AC",radius:0},{color:"#26A69A",radius:0},{color:"#00897B",radius:0},{color:"#00796B",radius:0},{color:"#00695C",radius:0},{color:"#004D40",radius:0}],counter:0,interval:null}},computed:{circlePositions:an},created(){this.interval=setInterval(()=>{this.counter++,this.circles=this.circles.map((t,o)=>({...t,radius:(this.counter+o)%8}))},70)},destroyed(){clearInterval(this.interval)}},dn={class:"loading-spinner"},un=["cx","cy","r","fill"];function _n(t,o,s,n,a,i){return c(),r("svg",dn,[(c(!0),r(B,null,R(a.circles,(_,u)=>(c(),r("circle",{cx:i.circlePositions[u]&&i.circlePositions[u].x,cy:i.circlePositions[u]&&i.circlePositions[u].y,r:_.radius,fill:_.color,key:u},null,8,un))),128))])}const pn=T(rn,[["render",_n],["__scopeId","data-v-fe4f2036"]]);const hn={class:"w-full px-4 py-3 border border-gray-100 flex justify-end items-center"},vn={class:"w-full px-4 py-3 border border-gray-100 flex justify-end items-center"},mn={class:"container mx-auto"},gn={class:"grid grid-cols-12 gap-5"},fn={class:"col-span-12 xl:col-span-4 md:col-span-6 lg:col-span-5"},yn={class:"col-span-12 xl:col-span-8 md:col-span-6 lg:col-span-7"},bn={class:"flex justify-end font-readex"},xn={key:0,class:"flex justify-center items-center"},wn={key:2,class:"w-full mt-7 services-wrapper"},$n={class:"flex justify-end service-title"},Cn={__name:"Dashboards.v1",setup(t){const{t:o}=X();ie();const{role:s,userEmail:n}=D(ie()),a=[{icon:"/images/home/discount.svg",title:o("dashboard.discount"),noBorder:!1,type:O.ADD_DISCOUNT},{icon:"/images/home/comments.svg",title:o("dashboard.note"),noBorder:!1,type:O.ADD_NOTE},{icon:"/images/home/delete.svg",title:o("dashboard.discard"),noBorder:!1,type:O.CANCEL},{icon:"/images/home/suspension.svg",title:o("dashboard.pause"),noBorder:!1,type:O.HOLD}],i=k(null),_=k(""),u=k(!1),d=q(),{pieces:w,selectedPiece:y,pieceSelected:C,loading:v}=D(q()),m=Z(),h=M();Se(()=>{d.fetch(),m.fetch()}),_e(()=>{console.log("Email:",n.value,"Role:",s.value),console.log(d.pieces)}),Ie(()=>{}),De(()=>{m.clear(),d.clear(),h.clear()}),je(()=>{a.forEach(b=>{switch(b.type){case O.ADD_DISCOUNT:b.title=o("dashboard.discount");break;case O.ADD_NOTE:b.title=o("dashboard.note");break;case O.CANCEL:b.title=o("dashboard.discard");break;case O.HOLD:b.title=o("dashboard.pause");break}})});const A=b=>{d.setSelectedPiece(b)},P=()=>{i.value.length?m.addNewCustomer({name:_.value,mobile:i.value.replace(/\s/g,"")}):console.log("phone number required"),_.value="",i.value=""},I=()=>{_.value="",i.value=""},f=()=>{i.value=i.value.replace(/\D/g,"")};return(b,x)=>{var z;const K=te("vue-tel-input"),W=te("FullHeightCard");return c(),r(B,null,[$(ce,{modelValue:u.value,"onUpdate:modelValue":x[2]||(x[2]=j=>u.value=j),title:l(o)("dashboard.addCustomer"),"button-label":l(o)("common.save"),button:"bg-main",onConfirm:P,onCancel:I},{default:H(()=>[e("div",hn,[F(e("input",{class:"w-full focus:outline-none text-right",type:"text",placeholder:"أحمد أحمد","onUpdate:modelValue":x[0]||(x[0]=j=>_.value=j)},null,512),[[ue,_.value]]),$(l(qo),{class:"ml-2"})]),e("div",vn,[$(K,{modelValue:i.value,"onUpdate:modelValue":x[1]||(x[1]=j=>i.value=j),onInput:f},null,8,["modelValue"]),$(l(Yo),{class:"ml-2"})])]),_:1},8,["modelValue","title","button-label"]),e("div",mn,[e("div",gn,[e("div",fn,[$(W,null,{default:H(()=>[$(Oo,{"button-array":a,onShowModal:x[3]||(x[3]=j=>u.value=!0)})]),_:1})]),e("div",yn,[e("div",bn,p(l(o)("dashboard.pieceType")),1),l(v)?(c(),r("div",xn,[$(pn)])):(c(),N(Ro,{key:1,pieces:l(w),onSetActivePiece:A},null,8,["pieces"])),l(y)?(c(),r("div",wn,[e("div",$n,p(l(o)("dashboard.serviceType")),1),$(sn,{services:(z=l(y))==null?void 0:z.services},null,8,["services"])])):L("",!0)])])])],64)}}},Pn=T(Cn,[["__scopeId","data-v-2f91818b"]]);export{Pn as default};
