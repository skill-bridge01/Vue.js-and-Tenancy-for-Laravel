import{a2 as j,a3 as P,a4 as M,Z as T}from"./app-c03dcb6d.js";class D{create(i){return j.post("/create-invoice",i)}update(i){return j.post("/update-invoice",i)}getUserInvoices(){return j.post("/get-user-invoices")}getInvoicesFile(i){return j.post("/get-invoices-file",i,{responseType:"blob"})}delete(i){return j.delete("/invoice/"+i)}}const I=new D;class A{create(i){return j.post("/create-customer",i)}update(i){return j.post("/update-invoice",i)}getAll(){return j.post("/get-customers")}search(i){return j.post("/search-customer",i)}}const O=new A,B=P("carts",{state:()=>({carts:[],selectedCart:null,note:"",discount:0}),actions:{clear(){this.carts=[],this.note="",this.discount=0},setCarts(o){},addNewCart(o){this.carts.filter(h=>h.service.id===o.service.id).length?console.log("already exist"):this.carts.push(o)},removeCart(o){const i=this.carts.find(h=>h.service.id===o.service.id);if(i){const h=this.carts.indexOf(i);h>-1&&this.carts.splice(h,1)}},changeCartCount(o,i){console.log("This.Carts",this.carts,"cart.service.id",o.service.id);const h=this.carts.find(l=>l.service.id===o.service.id);h&&(h.count+=i)},changeCartDiscount(o,i){const h=this.carts.find(l=>l.service.id===o.service.id);h&&(h.discount=parseFloat(i))},changeCartNote(o,i){console.log("Note",o,i);const h=this.carts.find(l=>l.service.id===o.service.id);h&&(h.note=i)},updateDiscount(o){this.discount=o},updateNote(o){this.note=o}}}),R={ADD_DISCOUNT:0,ADD_NOTE:1,CANCEL:2,HOLD:3},N={IN_PROGRESS:1,READY_TO_PICK_UP:2,DELIVERED:3},W=P("customers",{state:()=>({customers:[],selectedCustomer:null}),actions:{clear(){this.customers=[],this.selectedCustomer=null},setActiveCustomer(o){this.selectedCustomer=o},addNewCustomer(o){O.create(o).then(i=>{console.log(i.data.customer);const h=i.data.customer;this.customers.push(h)}).catch(i=>{console.log(i)})},fetch(){O.search().then(o=>{console.log(o.data),o.data.status&&(this.customers=o.data.customer)}).catch(o=>{console.log(o)})},async search(o){try{const i=await O.search({keyword:o});return console.log(i.data.status),i.data.status?(console.log(i.data),this.customers=i.data.customer,i.data.customer):Promise.reject("Not found")}catch{return Promise.reject("")}}}}),H=P("invoices",{state:()=>({invoices:[],filteredInvoices:[],selectedInvoice:null,createdInvoice:null,fetchError:null,loading:!1}),actions:{clear(){this.invoices=[],this.filteredInvoices=[],this.selectedInvoice=null,this.createdInvoice=null,this.fetchError=null,this.loading=!1},setInvoices(o){this.invoices=o},setFilteredInvoices(o){this.filteredInvoices=o},setActiveInvoice(o){this.selectedInvoice=o},fetch(){this.loading=!0,I.getUserInvoices().then(o=>{this.invoices=o.data.invoices,this.filteredInvoices=o.data.invoices,this.loading=!1}).catch(o=>{this.fetchError=o,this.loading=!1})},fetchLocalData(){M.get("data-sources/invoices.json",{baseURL:window.location.origin}).then(o=>{console.log(o.data.status),o.data.status&&(console.log(o.data.invoices),this.invoices=o.data.invoices,this.filteredInvoices=o.data.invoices)})},async createInvoice(o,i,h,l,n){console.log("payload");const s=L({carts:o,discount:h,note:i,customer:l,paymentMethod:n});console.log("payload");const d=await I.create(s);return d.data.status?d.data.invoice:Promise.reject("error occurred")},async downloadInvoice(o,i){try{return(await I.getInvoicesFile({invoice_id:o,baseURL:i,pdf:!0})).data}catch(h){return Promise.reject(h)}},async updateInvoice(o){try{const i=await I.update(o);return console.log("invoice Info",i.data),i.data.status?i.data.invoice:Promise.reject("")}catch(i){return Promise.reject(i)}},async delete(o){this.loading=!0;try{return await I.delete(o),console.log("Invoices::",this.filteredInvoices,o),this.filteredInvoices=this.filteredInvoices.filter(i=>i.id!==o),!0}catch(i){return this.fetchError=i,i}finally{this.loading=!1}}}});function L(o){let i={};i.discount=o.discount,i.note=o.note,i.customer_name=o.customer.name,i.mobile=o.customer.mobile,i.customer_id=o.customer.id,i.payment_method=o.paymentMethod;const h=o.carts.map((l,n)=>({id:l.service.pivot.id,number_of_piece:l.count,note:l.note,discount:l.discount}));return i.service_piece_ids=h,console.log(i),i}var C={exports:{}};(function(o,i){(function(l,n){o.exports=n()})(window,function(){return function(h){var l={};function n(s){if(l[s])return l[s].exports;var d=l[s]={i:s,l:!1,exports:{}};return h[s].call(d.exports,d,d.exports,n),d.l=!0,d.exports}return n.m=h,n.c=l,n.d=function(s,d,u){n.o(s,d)||Object.defineProperty(s,d,{enumerable:!0,get:u})},n.r=function(s){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},n.t=function(s,d){if(d&1&&(s=n(s)),d&8||d&4&&typeof s=="object"&&s&&s.__esModule)return s;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:s}),d&2&&typeof s!="string")for(var b in s)n.d(u,b,(function(c){return s[c]}).bind(null,b));return u},n.n=function(s){var d=s&&s.__esModule?function(){return s.default}:function(){return s};return n.d(d,"a",d),d},n.o=function(s,d){return Object.prototype.hasOwnProperty.call(s,d)},n.p="",n(n.s=0)}({"./src/index.js":function(h,l,n){n.r(l),n("./src/sass/index.scss");var s=n("./src/js/init.js"),d=s.default.init;typeof window<"u"&&(window.printJS=d),l.default=d},"./src/js/browser.js":function(h,l,n){n.r(l);var s={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!s.isIE()&&!!window.StyleMedia},isChrome:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!u.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};l.default=s},"./src/js/functions.js":function(h,l,n){n.r(l),n.d(l,"addWrapper",function(){return b}),n.d(l,"capitalizePrint",function(){return c}),n.d(l,"collectStyles",function(){return a}),n.d(l,"addHeader",function(){return t}),n.d(l,"cleanUp",function(){return y}),n.d(l,"isRawHTML",function(){return v});var s=n("./src/js/modal.js"),d=n("./src/js/browser.js");function u(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(p){return typeof p}:u=function(p){return p&&typeof Symbol=="function"&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},u(e)}function b(e,f){var p="font-family:"+f.font+" !important; font-size: "+f.font_size+" !important; width:100%;";return'<div style="'+p+'">'+e+"</div>"}function c(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e,f){for(var p=document.defaultView||window,g="",m=p.getComputedStyle(e,""),E=0;E<m.length;E++)(f.targetStyles.indexOf("*")!==-1||f.targetStyle.indexOf(m[E])!==-1||r(f.targetStyles,m[E]))&&m.getPropertyValue(m[E])&&(g+=m[E]+":"+m.getPropertyValue(m[E])+";");return g+="max-width: "+f.maxWidth+"px !important; font-size: "+f.font_size+" !important;",g}function r(e,f){for(var p=0;p<e.length;p++)if(u(f)==="object"&&f.indexOf(e[p])!==-1)return!0;return!1}function t(e,f){var p=document.createElement("div");if(v(f.header))p.innerHTML=f.header;else{var g=document.createElement("h1"),m=document.createTextNode(f.header);g.appendChild(m),g.setAttribute("style",f.headerStyle),p.appendChild(g)}e.insertBefore(p,e.childNodes[0])}function y(e){e.showModal&&s.default.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var f="mouseover";(d.default.isChrome()||d.default.isFirefox())&&(f="focus");var p=function g(){window.removeEventListener(f,g),e.onPrintDialogClose();var m=document.getElementById(e.frameId);m&&m.remove()};window.addEventListener(f,p)}function v(e){var f=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return f.test(e)}},"./src/js/html.js":function(h,l,n){n.r(l);var s=n("./src/js/functions.js"),d=n("./src/js/print.js");function u(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(t){return typeof t}:u=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(a)}l.default={print:function(r,t){var y=c(r.printable)?r.printable:document.getElementById(r.printable);if(!y){window.console.error("Invalid HTML element id: "+r.printable);return}r.printableElement=b(y,r),r.header&&Object(s.addHeader)(r.printableElement,r),d.default.send(r,t)}};function b(a,r){for(var t=a.cloneNode(),y=Array.prototype.slice.call(a.childNodes),v=0;v<y.length;v++)if(r.ignoreElements.indexOf(y[v].id)===-1){var e=b(y[v],r);t.appendChild(e)}switch(r.scanStyles&&a.nodeType===1&&t.setAttribute("style",Object(s.collectStyles)(a,r)),a.tagName){case"SELECT":t.value=a.value;break;case"CANVAS":t.getContext("2d").drawImage(a,0,0);break}return t}function c(a){return u(a)==="object"&&a&&(a instanceof HTMLElement||a.nodeType===1)}},"./src/js/image.js":function(h,l,n){n.r(l);var s=n("./src/js/functions.js"),d=n("./src/js/print.js"),u=n("./src/js/browser.js");l.default={print:function(c,a){c.printable.constructor!==Array&&(c.printable=[c.printable]),c.printableElement=document.createElement("div"),c.printable.forEach(function(r){var t=document.createElement("img");if(t.setAttribute("style",c.imageStyle),t.src=r,u.default.isFirefox()){var y=t.src;t.src=y}var v=document.createElement("div");v.appendChild(t),c.printableElement.appendChild(v)}),c.header&&Object(s.addHeader)(c.printableElement,c),d.default.send(c,a)}}},"./src/js/init.js":function(h,l,n){n.r(l);var s=n("./src/js/browser.js"),d=n("./src/js/modal.js"),u=n("./src/js/pdf.js"),b=n("./src/js/html.js"),c=n("./src/js/raw-html.js"),a=n("./src/js/image.js"),r=n("./src/js/json.js");function t(v){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(f){return typeof f}:t=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},t(v)}var y=["pdf","html","image","json","raw-html"];l.default={init:function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(w){throw w},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},f=arguments[0];if(f===void 0)throw new Error("printJS expects at least 1 attribute.");switch(t(f)){case"string":e.printable=encodeURI(f),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":e.printable=f.printable,e.fallbackPrintable=typeof f.fallbackPrintable<"u"?f.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable;for(var p in e)p==="printable"||p==="fallbackPrintable"||(e[p]=typeof f[p]<"u"?f[p]:e[p]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+t(f))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||typeof e.type!="string"||y.indexOf(e.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&d.default.show(e),e.onLoadingStart&&e.onLoadingStart();var g=document.getElementById(e.frameId);g&&g.parentNode.removeChild(g);var m=document.createElement("iframe");switch(s.default.isFirefox()?m.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):m.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),m.setAttribute("id",e.frameId),e.type!=="pdf"&&(m.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach(function(S){m.srcdoc+='<link rel="stylesheet" href="'+S+'">'})),m.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(s.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var E=window.open(e.fallbackPrintable,"_blank");E.focus(),e.onIncompatibleBrowser()}catch(S){e.onError(S)}finally{e.showModal&&d.default.close(),e.onLoadingEnd&&e.onLoadingEnd()}else u.default.print(e,m);break;case"image":a.default.print(e,m);break;case"html":b.default.print(e,m);break;case"raw-html":c.default.print(e,m);break;case"json":r.default.print(e,m);break}}}},"./src/js/json.js":function(h,l,n){n.r(l);var s=n("./src/js/functions.js"),d=n("./src/js/print.js");function u(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(r){return typeof r}:u=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u(c)}l.default={print:function(a,r){if(u(a.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof a.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!a.properties||!Array.isArray(a.properties))throw new Error("Invalid properties array for your JSON data.");a.properties=a.properties.map(function(t){return{field:u(t)==="object"?t.field:t,displayName:u(t)==="object"?t.displayName:t,columnSize:u(t)==="object"&&t.columnSize?t.columnSize+";":100/a.properties.length+"%;"}}),a.printableElement=document.createElement("div"),a.header&&Object(s.addHeader)(a.printableElement,a),a.printableElement.innerHTML+=b(a),d.default.send(a,r)}};function b(c){var a=c.printable,r=c.properties,t='<table style="border-collapse: collapse; width: 100%;">';c.repeatTableHeader&&(t+="<thead>"),t+="<tr>";for(var y=0;y<r.length;y++)t+='<th style="width:'+r[y].columnSize+";"+c.gridHeaderStyle+'">'+Object(s.capitalizePrint)(r[y].displayName)+"</th>";t+="</tr>",c.repeatTableHeader&&(t+="</thead>"),t+="<tbody>";for(var v=0;v<a.length;v++){t+="<tr>";for(var e=0;e<r.length;e++){var f=a[v],p=r[e].field.split(".");if(p.length>1)for(var g=0;g<p.length;g++)f=f[p[g]];else f=f[r[e].field];t+='<td style="width:'+r[e].columnSize+c.gridStyle+'">'+f+"</td>"}t+="</tr>"}return t+="</tbody></table>",t}},"./src/js/modal.js":function(h,l,n){n.r(l);var s={show:function(u){var b="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",c=document.createElement("div");c.setAttribute("style",b),c.setAttribute("id","printJS-Modal");var a=document.createElement("div");a.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var r=document.createElement("div");r.setAttribute("class","printClose"),r.setAttribute("id","printClose"),a.appendChild(r);var t=document.createElement("span");t.setAttribute("class","printSpinner"),a.appendChild(t);var y=document.createTextNode(u.modalMessage);a.appendChild(y),c.appendChild(a),document.getElementsByTagName("body")[0].appendChild(c),document.getElementById("printClose").addEventListener("click",function(){s.close()})},close:function(){var u=document.getElementById("printJS-Modal");u&&u.parentNode.removeChild(u)}};l.default=s},"./src/js/pdf.js":function(h,l,n){n.r(l);var s=n("./src/js/print.js"),d=n("./src/js/functions.js");l.default={print:function(c,a){if(c.base64){var r=Uint8Array.from(atob(c.printable),function(y){return y.charCodeAt(0)});u(c,a,r);return}c.printable=/^(blob|http|\/\/)/i.test(c.printable)?c.printable:window.location.origin+(c.printable.charAt(0)!=="/"?"/"+c.printable:c.printable);var t=new window.XMLHttpRequest;t.responseType="arraybuffer",t.addEventListener("error",function(){Object(d.cleanUp)(c),c.onError(t.statusText,t)}),t.addEventListener("load",function(){if([200,201].indexOf(t.status)===-1){Object(d.cleanUp)(c),c.onError(t.statusText,t);return}u(c,a,t.response)}),t.open("GET",c.printable,!0),t.send()}};function u(b,c,a){var r=new window.Blob([a],{type:"application/pdf"});r=window.URL.createObjectURL(r),c.setAttribute("src",r),s.default.send(b,c)}},"./src/js/print.js":function(h,l,n){n.r(l);var s=n("./src/js/browser.js"),d=n("./src/js/functions.js"),u={send:function(t,y){document.getElementsByTagName("body")[0].appendChild(y);var v=document.getElementById(t.frameId);v.onload=function(){if(t.type==="pdf"){s.default.isFirefox()?setTimeout(function(){return b(v,t)},1e3):b(v,t);return}var e=v.contentWindow||v.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(t.printableElement),t.type!=="pdf"&&t.style){var f=document.createElement("style");f.innerHTML=t.style,e.head.appendChild(f)}var p=e.getElementsByTagName("img");p.length>0?c(Array.from(p)).then(function(){return b(v,t)}):b(v,t)}}};function b(r,t){try{if(r.focus(),s.default.isEdge()||s.default.isIE())try{r.contentWindow.document.execCommand("print",!1,null)}catch{r.contentWindow.print()}else r.contentWindow.print()}catch(y){t.onError(y)}finally{s.default.isFirefox()&&(r.style.visibility="hidden",r.style.left="-1px"),Object(d.cleanUp)(t)}}function c(r){var t=r.map(function(y){if(y.src&&y.src!==window.location.href)return a(y)});return Promise.all(t)}function a(r){return new Promise(function(t){var y=function v(){!r||typeof r.naturalWidth>"u"||r.naturalWidth===0||!r.complete?setTimeout(v,500):t()};y()})}l.default=u},"./src/js/raw-html.js":function(h,l,n){n.r(l);var s=n("./src/js/print.js");l.default={print:function(u,b){u.printableElement=document.createElement("div"),u.printableElement.setAttribute("style","width:100%"),u.printableElement.innerHTML=u.printable,s.default.send(u,b)}}},"./src/sass/index.scss":function(h,l,n){},0:function(h,l,n){h.exports=n("./src/index.js")}}).default})})(C);var x=C.exports;const K=T(x);export{R as C,N as I,W as a,H as b,K as p,B as u};
